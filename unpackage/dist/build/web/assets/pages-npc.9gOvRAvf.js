import{r as a,n as e,g as s,a as l,c as t,b as o,w as c,d as u,F as r,e as i,i as n,o as p,f as _,h as v,j as m,k as d,p as f,t as g,l as h,s as j,m as k}from"./index-C_tPV8Gg.js";import{_ as y}from"./uv-scroll-list.CDZi1Gj-.js";import{o as b,a as x,r as C}from"./uni-app.es.v3BVOZkq.js";import{_ as w}from"./GlobalChatButton.DwNPUj8G.js";import{t as B}from"./tabBar.3G2tchLu.js";import{i as E}from"./common.CTMMgFUX.js";import{_ as I}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./uv-icon.VZcHbu9W.js";import"./uv-icon.vue_vue_type_style_index_0_scoped_eab170a5_lang.DmvKmKEs.js";import"./uni-icons.DEQM0KeZ.js";import"./uv-safe-bottom.CswIXqeN.js";import"./uv-safe-bottom.vue_vue_type_style_index_0_scoped_71c4b1ce_lang.DIKD1uNm.js";import"./tabBar.vue_vue_type_style_index_0_scoped_8fa15eba_lang.CPwMltbA.js";import"./cook.Ddvzagky.js";const T=I({__name:"npc",emits:["openItem"],setup(I,{emit:T}){const D=a("");e((()=>{D.value=i().windowHeight})),b((()=>{}));E();const F=a(s("locationData")),G=a(s("npcData"));a(!0);const q=a(new Set),H=a([]),N=a=>{if("全部"!==a){if(q.value.has(a))return q.value.delete(a),q.value.clear(),q.value.add("全部"),void(H.value=G.value);q.value.clear(),q.value.add(a),H.value=G.value.filter((a=>{let e=a.location.split(","),s=[...q.value].concat();return e.forEach((a=>{s=s.filter((e=>e!==a.trim()))})),0===s.length}))}else q.value.clear(),q.value.add(a),H.value=G.value};N("全部");const S=a(!1);x((a=>{a.scrollTop>=300?S.value=!0:S.value=!1}));const z=()=>{f({scrollTop:0,duration:150})};return(a,e)=>{const s=n,i=C(l("uv-scroll-list"),y),f=C(l("GlobalChatButton"),w);return p(),t(r,null,[o(s,{class:"npc",style:u({height:D.value-44+"px"})},{default:c((()=>[o(s,{class:"tag-filter"},{default:c((()=>[o(s,{class:"touhou-tag",onClick:e[0]||(e[0]=a=>N("全部"))},{default:c((()=>[_(" 全部 "),q.value.has("全部")?(p(),v(s,{key:0,class:"touhou-tag-select"})):m("",!0)])),_:1}),o(i,{class:"tag-scroll",indicator:!1},{default:c((()=>[(p(!0),t(r,null,d(F.value,(a=>(p(),v(s,{class:"touhou-tag",key:a,onClick:e=>N(a)},{default:c((()=>[_(g(a)+" ",1),q.value.has(a)?(p(),v(s,{key:0,class:"touhou-tag-select"})):m("",!0)])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1}),o(s,{class:"npc-area"},{default:c((()=>[o(s,{class:"npc-area-img",style:u({height:D.value-95+"px"})},{default:c((()=>[(p(!0),t(r,null,d(H.value,((a,e)=>(p(),v(s,{class:"npc-img",key:a.name,onClick:e=>(j("selectNpc",a),void k({url:"/pages/npcItem"}))},{default:c((()=>[h("img",{src:"/static/img/npc/"+a.name+".png",style:{width:"76px",height:"100px"},mode:"scaleToFill",onError:a=>{}},null,40,["src","onError"])])),_:2},1032,["onClick"])))),128))])),_:1},8,["style"])])),_:1}),S.value?(p(),v(s,{key:0,class:"top-back",onClick:z},{default:c((()=>[o(s,{class:"arrow"}),o(s,{class:"stick"})])),_:1})):m("",!0)])),_:1},8,["style"]),o(B,{selected:0}),o(f)],64)}}},[["__scopeId","data-v-d9e1fa8c"]]);export{T as default};
