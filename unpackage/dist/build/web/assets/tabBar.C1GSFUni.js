var t,e,a,i;import{e as s,o,c as l,w as n,a as r,f as c,F as d,r as u,n as p,j as h,t as m,i as v,D as b,C as g,K as f,k as y,b as x,W as _,l as S,X as P,G as k}from"./index-GtydPhVv.js";import{_ as C,m as $,a as I,r as D,d as z,c as w,h as B}from"./uv-safe-bottom.DWGvcUcV.js";const H=C({name:"uv-tabbar-item",mixins:[$,I,{props:{name:{type:[String,Number,null],default:null},icon:{icon:String,default:""},iconSize:{type:[String,Number],default:""},badge:{type:[String,Number,null],default:null},dot:{type:Boolean,default:!1},text:{type:String,default:""},badgeStyle:{type:[Object,String],default:"top: 6px;right:2px;"},...null==(e=null==(t=uni.$uv)?void 0:t.props)?void 0:e.tabbarItem}}],emits:["click","change"],data:()=>({isActive:!1,parentData:{value:null,activeColor:"",inactiveColor:"",iconSize:20}}),created(){this.init()},methods:{init(){this.updateParentData(),this.parent||this.$uv.error("uv-tabbar-item必须搭配uv-tabbar组件使用");const t=this.parent.children.indexOf(this);this.isActive=(this.name||t)===this.parentData.value},updateParentData(){this.getParentData("uv-tabbar")},updateFromParent(){this.init()},clickHandler(){this.$nextTick((()=>{const t=this.parent.children.indexOf(this),e=this.name||t;e!==this.parent.value&&this.parent.$emit("change",e),this.$emit("click",e)}))}}},[["render",function(t,e,a,i,g,f){const y=D(s("uv-icon"),z),x=D(s("uv-badge"),w),_=v,S=b;return o(),l(_,{class:"uv-tabbar-item",style:p([t.$uv.addStyle(t.customStyle)]),onClick:f.clickHandler},{default:n((()=>[r(_,{class:"uv-tabbar-item__icon"},{default:n((()=>[t.icon?(o(),l(y,{key:0,name:t.icon,color:g.isActive?g.parentData.activeColor:g.parentData.inactiveColor,size:t.iconSize?t.iconSize:g.parentData.iconSize},null,8,["name","color","size"])):(o(),c(d,{key:1},[g.isActive?u(t.$slots,"active-icon",{key:0},void 0,!0):u(t.$slots,"inactive-icon",{key:1},void 0,!0)],64)),r(x,{absolute:"",offset:[0,t.dot?"34rpx":t.badge>9?"14rpx":"20rpx"],customStyle:t.badgeStyle,isDot:t.dot,value:t.badge||(t.dot?1:null),show:t.dot||t.badge>0},null,8,["offset","customStyle","isDot","value","show"])])),_:3}),u(t.$slots,"text",{},(()=>[r(S,{class:"uv-tabbar-item__text",style:p({color:g.isActive?g.parentData.activeColor:g.parentData.inactiveColor})},{default:n((()=>[h(m(t.text),1)])),_:1},8,["style"])]),!0)])),_:3},8,["style","onClick"])}],["__scopeId","data-v-2be3e003"]]);const A=C({name:"uv-tabbar",mixins:[$,I,{props:{value:{type:[String,Number,null],default:null},safeAreaInsetBottom:{type:Boolean,default:!0},border:{type:Boolean,default:!0},zIndex:{type:[String,Number],default:9},activeColor:{type:String,default:"#1989fa"},inactiveColor:{type:String,default:"#7d7e80"},fixed:{type:Boolean,default:!0},placeholder:{type:Boolean,default:!0},iconSize:{type:[String,Number],default:20},...null==(i=null==(a=uni.$uv)?void 0:a.props)?void 0:i.tabbar}}],data:()=>({placeholderHeight:0}),computed:{tabbarStyle(){const t={zIndex:this.zIndex};return this.$uv.deepMerge(t,this.$uv.addStyle(this.customStyle))},updateChild(){return[this.value,this.activeColor,this.inactiveColor]},updatePlaceholder(){return[this.fixed,this.placeholder]}},watch:{updateChild(){this.updateChildren()},updatePlaceholder(){this.setPlaceholderHeight()}},created(){this.children=[]},mounted(){this.setPlaceholderHeight()},methods:{updateChildren(){this.children.length&&this.children.map((t=>t.updateFromParent()))},async setPlaceholderHeight(){this.fixed&&this.placeholder&&(await this.$uv.sleep(20),this.$uvGetRect(".uv-tabbar__content").then((({height:t=50})=>{this.placeholderHeight=t})))}}},[["render",function(t,e,a,i,c,d){const h=v,m=D(s("uv-safe-bottom"),B);return o(),l(h,{class:"uv-tabbar"},{default:n((()=>[r(h,{class:g(["uv-tabbar__content",[t.border&&"uv-border-top",t.fixed&&"uv-tabbar--fixed"]]),ref:"uv-tabbar__content",onTouchmove:f(t.noop,["stop","prevent"]),style:p([d.tabbarStyle])},{default:n((()=>[r(h,{class:"uv-tabbar__content__item-wrapper"},{default:n((()=>[u(t.$slots,"default",{},void 0,!0)])),_:3}),t.safeAreaInsetBottom?(o(),l(m,{key:0})):y("",!0)])),_:3},8,["onTouchmove","class","style"]),t.placeholder?(o(),l(h,{key:0,class:"uv-tabbar__placeholder",style:p({height:c.placeholderHeight+"px"})},null,8,["style"])):y("",!0)])),_:3})}],["__scopeId","data-v-274aef2b"]]),N=C({__name:"tabBar",props:{selected:{type:Number,default:0}},setup(t){const e=t,a=x([{id:0,pagePath:"/pages/npc",iconPath:"/static/img/common/npc-1.png",selectedIconPath:"/static/img/common/npc-0.png",text:"人物"},{id:1,pagePath:"/pages/cook",iconPath:"/static/img/common/food-1.png",selectedIconPath:"/static/img/common/food-0.png",text:"料理"},{id:2,pagePath:"/pages/drinks",iconPath:"/static/img/common/drinks-1.png",selectedIconPath:"/static/img/common/drinks-0.png",text:"饮品"},{id:3,pagePath:"/pages/setting",iconPath:"/static/img/common/setting-1.png",selectedIconPath:"/static/img/common/setting-0.png",text:"设置"}]),i=t=>{P({url:a.value[t].pagePath})};return _(),(t,u)=>{const p=k,b=v,g=D(s("uv-tabbar-item"),H),f=D(s("uv-tabbar"),A);return o(),l(b,{class:"tab-bar"},{default:n((()=>[r(f,{value:e.selected,onChange:i},{default:n((()=>[(o(!0),c(d,null,S(a.value,(t=>(o(),l(g,{key:t.id,class:"tab-item"},{"active-icon":n((()=>[r(p,{src:t.selectedIconPath,style:{"border-radius":"30px",width:"50px",height:"50px"},mode:"scaleToFill"},null,8,["src"]),r(b,{class:"text-overlay"},{default:n((()=>[h(m(t.text),1)])),_:2},1024)])),"inactive-icon":n((()=>[r(p,{src:t.iconPath,style:{"border-radius":"30px",width:"50px",height:"50px"},mode:"scaleToFill"},null,8,["src"]),r(b,{class:"text-overlay"},{default:n((()=>[h(m(t.text),1)])),_:2},1024)])),_:2},1024)))),128))])),_:1},8,["value"])])),_:1})}}},[["__scopeId","data-v-e5aa4c67"]]);export{N as t};
