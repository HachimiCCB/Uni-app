import{r as e,a1 as a,a as t,h as s,w as l,i as r,o as i,b as c,f as o,t as n,j as u,c as _,k as d,F as m,D as g,E as f,aa as p,a6 as v}from"./index-C_tPV8Gg.js";import{_ as y}from"./unicloud-db.BpemekyA.js";import{c as h,r as b}from"./uni-app.es.v3BVOZkq.js";import"./uv-icon.vue_vue_type_style_index_0_scoped_eab170a5_lang.DmvKmKEs.js";import{_ as k}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./uv-safe-bottom.vue_vue_type_style_index_0_scoped_71c4b1ce_lang.DIKD1uNm.js";import"./tabBar.vue_vue_type_style_index_0_scoped_8fa15eba_lang.CPwMltbA.js";const x=k({__name:"articleDetail",setup(k){const x=e({}),j=e=>{if(!e)return"";const a=new Date(e);return`${a.getFullYear()}-${a.getMonth()+1}-${a.getDate()}`};return h((e=>{e.id?x.value=`_id == "${e.id}"`:a({title:"缺少文章ID",icon:"none"})})),(e,a)=>{const h=r,k=g,D=f,w=p,I=b(t("unicloud-db"),y);return i(),s(h,{class:"article-container"},{default:l((()=>[c(I,{ref:"udb",where:x.value,collection:"article",field:"_id, title, author, content, coverImage, images, tags, publishDate",getone:!0},{default:l((({data:e,loading:a,error:t})=>[a?(i(),s(h,{key:0,class:"loading-text"},{default:l((()=>[o("加载中...")])),_:1})):t?(i(),s(h,{key:1,class:"error-text"},{default:l((()=>[o("加载失败，请稍后再试。")])),_:1})):e?(i(),s(h,{key:2},{default:l((()=>[c(h,{class:"article-title"},{default:l((()=>[o(n(e.title),1)])),_:2},1024),c(h,{class:"article-meta"},{default:l((()=>[c(k,{class:"author"},{default:l((()=>[o("作者："+n(e.author),1)])),_:2},1024),c(k,{class:"date"},{default:l((()=>[o(n(j(e.publishDate)),1)])),_:2},1024)])),_:2},1024),e.coverImage?(i(),s(D,{key:0,src:e.coverImage,class:"cover-image",mode:"widthFix"},null,8,["src"])):u("",!0),e.images&&e.images.length?(i(),s(h,{key:1,class:"article-images"},{default:l((()=>[c(h,{class:"image-grid"},{default:l((()=>[(i(!0),_(m,null,d(e.images,((a,t)=>(i(),s(h,{class:"image-item",key:t,onClick:a=>{return s=t,l=e.images,void v({current:s,urls:l});var s,l}},{default:l((()=>[c(D,{src:a,class:"content-image",mode:"aspectFill"},null,8,["src"])])),_:2},1032,["onClick"])))),128))])),_:2},1024)])),_:2},1024)):u("",!0),c(h,{class:"article-content"},{default:l((()=>[c(w,{nodes:e.content},null,8,["nodes"])])),_:2},1024),c(h,{class:"article-tags"},{default:l((()=>[(i(!0),_(m,null,d(e.tags,(e=>(i(),s(k,{key:e,class:"tag"},{default:l((()=>[o(n(e),1)])),_:2},1024)))),128))])),_:2},1024)])),_:2},1024)):u("",!0)])),_:1},8,["where"])])),_:1})}}},[["__scopeId","data-v-7319bc98"]]);export{x as default};
