var e,t,l,a,i,s,o,n,r,c,u,d;import{a as h,o as p,h as v,w as m,b as y,C as f,G as g,d as k,B as b,f as S,t as C,i as _,D as x,K as D,j as w,L as $,M as I,N as z,$ as N,O as T,P as O,c as B,F as A,k as E,Q as H,r as P,n as V,g as j,e as L,R,T as U,E as M}from"./index-yJ4PhItL.js";import{_ as F}from"./uv-scroll-list.BpCC2DaJ.js";import{r as G,o as W}from"./uni-app.es.B94_6v_V.js";import{m as q,a as K,_ as Z}from"./uv-icon.BQxwY_F2.js";import{_ as Q}from"./_plugin-vue_export-helper.BCo6x5W8.js";import{f as J,p as X,d as Y,e as ee,t as te}from"./uv-icon.vue_vue_type_style_index_0_scoped_eab170a5_lang.DdJGWjg1.js";import{_ as le,a as ae}from"./uv-modal.Cp3Wc0LV.js";import{_ as ie}from"./GlobalChatButton.DgQ5PF1e.js";import{t as se}from"./tabBar.DlXmd0ww.js";import{c as oe}from"./cookView.Dcy-FCV2.js";import"./uv-safe-bottom.gY7JiN5M.js";import"./uv-safe-bottom.vue_vue_type_style_index_0_scoped_71c4b1ce_lang.DIKD1uNm.js";import"./uni-icons.n_uTH-bD.js";import"./tabBar.vue_vue_type_style_index_0_scoped_8fa15eba_lang.CPwMltbA.js";import"./cookBar.BqClrrgn.js";const ne=Q({name:"uv-checkbox",mixins:[q,K,{props:{name:{type:[String,Number,Boolean],default:""},shape:{type:String,default:""},size:{type:[String,Number],default:""},checked:{type:Boolean,default:!1},disabled:{type:[String,Boolean],default:""},activeColor:{type:String,default:""},inactiveColor:{type:String,default:""},iconSize:{type:[String,Number],default:""},iconColor:{type:String,default:""},label:{type:[String,Number,Boolean],default:""},labelSize:{type:[String,Number],default:""},labelColor:{type:String,default:""},labelDisabled:{type:[String,Boolean],default:""},...null==(t=null==(e=uni.$uv)?void 0:e.props)?void 0:t.checkbox}}],data:()=>({isChecked:!1,parentData:{iconSize:12,labelDisabled:null,disabled:null,shape:"square",activeColor:null,inactiveColor:null,size:18,value:null,modelValue:null,iconColor:null,placement:"row",borderBottom:!1,iconPlacement:"left",labelSize:14,labelColor:"#303133"}}),computed:{elDisabled(){return""!==this.disabled?this.disabled:null!==this.parentData.disabled&&this.parentData.disabled},elLabelDisabled(){return""!==this.labelDisabled?this.labelDisabled:null!==this.parentData.labelDisabled&&this.parentData.labelDisabled},elSize(){return this.size?this.size:this.parentData.size?this.parentData.size:21},elIconSize(){return this.iconSize?this.iconSize:this.parentData.iconSize?this.parentData.iconSize:12},elActiveColor(){return this.activeColor?this.activeColor:this.parentData.activeColor?this.parentData.activeColor:"#2979ff"},elInactiveColor(){return this.inactiveColor?this.inactiveColor:this.parentData.inactiveColor?this.parentData.inactiveColor:"#c8c9cc"},elLabelColor(){return this.labelColor?this.labelColor:this.parentData.labelColor?this.parentData.labelColor:"#606266"},elShape(){return this.shape?this.shape:this.parentData.shape?this.parentData.shape:"circle"},elLabelSize(){return this.$uv.addUnit(this.labelSize?this.labelSize:this.parentData.labelSize?this.parentData.labelSize:"15")},elIconColor(){const e=this.iconColor?this.iconColor:this.parentData.iconColor?this.parentData.iconColor:"#ffffff";return this.elDisabled?this.isChecked?this.elInactiveColor:"transparent":this.isChecked?e:"transparent"},iconClasses(){let e=[];return e.push("uv-checkbox__icon-wrap--"+this.elShape),this.elDisabled&&e.push("uv-checkbox__icon-wrap--disabled"),this.isChecked&&this.elDisabled&&e.push("uv-checkbox__icon-wrap--disabled--checked"),e},iconWrapStyle(){const e={};return e.backgroundColor=this.isChecked&&!this.elDisabled?this.elActiveColor:"#ffffff",e.borderColor=this.isChecked&&!this.elDisabled?this.elActiveColor:this.elInactiveColor,e.width=this.$uv.addUnit(this.elSize),e.height=this.$uv.addUnit(this.elSize),"right"===this.parentData.iconPlacement&&(e.marginRight=0),e},checkboxStyle(){const e={};return this.parentData.borderBottom&&"row"===this.parentData.placement&&this.$uv.error("检测到您将borderBottom设置为true，需要同时将uv-checkbox-group的placement设置为column才有效"),this.parentData.borderBottom&&"column"===this.parentData.placement&&(e.paddingBottom="8px"),this.$uv.deepMerge(e,this.$uv.addStyle(this.customStyle))}},created(){this.init()},methods:{init(){this.updateParentData(),this.parent||this.$uv.error("uv-checkbox必须搭配uv-checkbox-group组件使用"),this.$nextTick((()=>{let e=[];this.parentData.value.length?e=this.parentData.value:this.parentData.modelValue.length&&(e=this.parentData.modelValue),this.checked?this.isChecked=!0:this.$uv.test.array(e)&&(this.isChecked=e.some((e=>e===this.name)))}))},updateParentData(){this.getParentData("uv-checkbox-group")},wrapperClickHandler(e){"right"===this.parentData.iconPlacement&&this.iconClickHandler(e)},iconClickHandler(e){this.preventEvent(e),this.elDisabled||this.setRadioCheckedStatus()},labelClickHandler(e){this.preventEvent(e),this.elLabelDisabled||this.elDisabled||this.setRadioCheckedStatus()},emitEvent(){this.$emit("change",this.isChecked),this.$nextTick((()=>{this.$uv.formValidate(this,"change")}))},setRadioCheckedStatus(){this.isChecked=!this.isChecked,this.emitEvent(),"function"==typeof this.parent.unCheckedOther&&this.parent.unCheckedOther(this)}},watch:{checked(){this.isChecked=this.checked}}},[["render",function(e,t,l,a,i,s){const o=G(h("uv-icon"),Z),n=_,r=x;return p(),v(n,{class:f(["uv-checkbox",[`uv-checkbox-label--${i.parentData.iconPlacement}`,i.parentData.borderBottom&&"column"===i.parentData.placement&&"uv-border-bottom"]]),style:k([s.checkboxStyle]),onClick:g(s.wrapperClickHandler,["stop"])},{default:m((()=>[y(n,{class:f(["uv-checkbox__icon-wrap",s.iconClasses]),onClick:g(s.iconClickHandler,["stop"]),style:k([s.iconWrapStyle])},{default:m((()=>[b(e.$slots,"icon",{},(()=>[y(o,{class:"uv-checkbox__icon-wrap__icon",name:"checkbox-mark",size:s.elIconSize,color:s.elIconColor},null,8,["size","color"])]),!0)])),_:3},8,["onClick","class","style"]),y(n,{class:"uv-checkbox__label-wrap",onClick:g(s.labelClickHandler,["stop"])},{default:m((()=>[b(e.$slots,"default",{},(()=>[y(r,{style:k({color:s.elDisabled?s.elInactiveColor:s.elLabelColor,fontSize:s.elLabelSize,lineHeight:s.elLabelSize})},{default:m((()=>[S(C(e.label),1)])),_:1},8,["style"])]),!0)])),_:3},8,["onClick"])])),_:3},8,["style","onClick","class"])}],["__scopeId","data-v-351a1a67"]]);const re=Q({name:"uv-checkbox-group",mixins:[q,K,{props:{value:{type:Array,default:()=>[]},modelValue:{type:Array,default:()=>[]},name:{type:String,default:""},shape:{type:String,default:"square"},disabled:{type:Boolean,default:!1},activeColor:{type:String,default:"#2979ff"},inactiveColor:{type:String,default:"#c8c9cc"},size:{type:[String,Number],default:18},placement:{type:String,default:"row"},labelSize:{type:[String,Number],default:14},labelColor:{type:[String],default:"#303133"},labelDisabled:{type:Boolean,default:!1},iconColor:{type:String,default:"#fff"},iconSize:{type:[String,Number],default:12},iconPlacement:{type:String,default:"left"},borderBottom:{type:Boolean,default:!1},...null==(a=null==(l=uni.$uv)?void 0:l.props)?void 0:a.checkboxGroup}}],computed:{parentData(){let e=[];return this.value.length?e=this.value:this.modelValue.length&&(e=this.modelValue),[e,this.disabled,this.inactiveColor,this.activeColor,this.size,this.labelDisabled,this.shape,this.iconSize,this.borderBottom,this.placement,this.labelSize,this.labelColor]},bemClass(){return this.bem("checkbox-group",["placement"])}},watch:{parentData(){this.children.length&&this.children.map((e=>{"function"==typeof e.init&&e.init()}))}},data:()=>({}),created(){this.children=[]},methods:{unCheckedOther(e){const t=[];this.children.map((e=>{e.isChecked&&t.push(e.name)})),this.$emit("update:modelValue",t),this.$emit("change",t)}}},[["render",function(e,t,l,a,i,s){const o=_;return p(),v(o,{class:f(["uv-checkbox-group",s.bemClass]),style:k([e.$uv.addStyle(this.customStyle)])},{default:m((()=>[b(e.$slots,"default",{},void 0,!0)])),_:3},8,["class","style"])}],["__scopeId","data-v-287a150a"]]);const ce=Q({name:"uv-search",emits:["click","input","change","clear","search","custom","focus","blur","clickIcon","update:modelValue"],mixins:[q,K,{props:{value:{type:[String,Number],default:""},modelValue:{type:[String,Number],default:""},shape:{type:String,default:"round"},bgColor:{type:String,default:"#f2f2f2"},placeholder:{type:String,default:"请输入关键字"},clearabled:{type:Boolean,default:!0},focus:{type:Boolean,default:!1},showAction:{type:Boolean,default:!0},actionStyle:{type:Object,default:()=>({})},actionText:{type:String,default:"搜索"},inputAlign:{type:String,default:"left"},inputStyle:{type:Object,default:()=>({})},disabled:{type:Boolean,default:!1},borderColor:{type:String,default:"transparent"},searchIconColor:{type:String,default:"#909399"},color:{type:String,default:"#606266"},placeholderColor:{type:String,default:"#909399"},searchIcon:{type:String,default:"search"},searchIconSize:{type:[Number,String],default:22},margin:{type:String,default:"0"},animation:{type:Boolean,default:!1},maxlength:{type:[String,Number],default:-1},height:{type:[String,Number],default:32},label:{type:[String,Number,null],default:null},boxStyle:{type:[String,Object],default:()=>({})},...null==(s=null==(i=uni.$uv)?void 0:i.props)?void 0:s.search}}],data(){return{keyword:"",showClear:!1,show:!1,focused:this.focus}},created(){this.keyword=this.modelValue},watch:{value(e){this.keyword=e},modelValue(e){this.keyword=e}},computed:{showActionBtn(){return!this.animation&&this.showAction}},methods:{keywordChange(){this.$emit("input",this.keyword),this.$emit("update:modelValue",this.keyword),this.$emit("change",this.keyword)},inputChange(e){this.keyword=e.detail.value,this.keywordChange()},clear(){this.keyword="",this.$nextTick((()=>{this.$emit("clear")})),this.keywordChange()},search(e){this.$emit("search",e.detail.value);try{D()}catch(t){}},custom(){this.$emit("custom",this.keyword);try{D()}catch(e){}},getFocus(){this.focused=!0,this.animation&&this.showAction&&(this.show=!0),this.$emit("focus",this.keyword)},blur(){setTimeout((()=>{this.focused=!1}),100),this.show=!1,this.$emit("blur",this.keyword)},clickHandler(){this.disabled&&this.$emit("click")},clickIcon(){this.$emit("clickIcon")}}},[["render",function(e,t,l,a,i,s){const o=_,n=G(h("uv-icon"),Z),r=$,c=x;return p(),v(o,{class:"uv-search",onClick:s.clickHandler,style:k([{margin:e.margin},e.$uv.addStyle(e.customStyle)])},{default:m((()=>[y(o,{class:"uv-search__content",style:k([{backgroundColor:e.bgColor,borderRadius:"round"==e.shape?"100px":"4px",borderColor:e.borderColor},e.$uv.addStyle(e.boxStyle)])},{default:m((()=>[e.disabled?(p(),v(o,{key:0,class:"uv-search__content__disabled"})):w("",!0),b(e.$slots,"prefix",{},(()=>[y(o,{class:"uv-search__content__icon"},{default:m((()=>[y(n,{onClick:s.clickIcon,size:e.searchIconSize,name:e.searchIcon,color:e.searchIconColor?e.searchIconColor:e.color},null,8,["onClick","size","name","color"])])),_:1})]),!0),y(r,{"confirm-type":"search",onBlur:s.blur,value:i.keyword,onConfirm:s.search,onInput:s.inputChange,disabled:e.disabled,onFocus:s.getFocus,focus:e.focus,maxlength:e.maxlength,"placeholder-class":"uv-search__content__input--placeholder",placeholder:e.placeholder,"placeholder-style":`color: ${e.placeholderColor}`,class:"uv-search__content__input",type:"text",style:k([{textAlign:e.inputAlign,color:e.color,backgroundColor:e.bgColor,height:e.$uv.addUnit(e.height)},e.inputStyle])},null,8,["onBlur","value","onConfirm","onInput","disabled","onFocus","focus","maxlength","placeholder","placeholder-style","style"]),i.keyword&&e.clearabled&&i.focused?(p(),v(o,{key:1,class:"uv-search__content__icon uv-search__content__close",onClick:s.clear},{default:m((()=>[y(n,{name:"close",size:"11",color:"#ffffff",customStyle:"line-height: 12px"})])),_:1},8,["onClick"])):w("",!0),b(e.$slots,"suffix",{},void 0,!0)])),_:3},8,["style"]),y(c,{style:k([e.actionStyle]),class:f(["uv-search__action",[(s.showActionBtn||i.show)&&"uv-search__action--active"]]),onClick:g(s.custom,["stop","prevent"])},{default:m((()=>[S(C(e.actionText),1)])),_:1},8,["style","class","onClick"])])),_:3},8,["onClick","style"])}],["__scopeId","data-v-0980d056"]]);const ue=Q({name:"uv-link",emits:["click"],mixins:[q,K,{props:{color:{type:String,default:""},fontSize:{type:[String,Number],default:14},underLine:{type:Boolean,default:!1},href:{type:String,default:""},mpTips:{type:String,default:"链接已复制，请在浏览器打开"},lineColor:{type:String,default:""},text:{type:String,default:""},...null==(n=null==(o=uni.$uv)?void 0:o.props)?void 0:n.link}}],computed:{linkStyle(){return{color:this.color,fontSize:this.$uv.addUnit(this.fontSize),lineHeight:this.$uv.addUnit(this.$uv.getPx(this.fontSize)+2),textDecoration:this.underLine?"underline":"none"}}},methods:{openLink(){window.open(this.href),this.$emit("click")}}},[["render",function(e,t,l,a,i,s){const o=x;return p(),v(o,{class:"uv-link",onClick:g(s.openLink,["stop"]),style:k([s.linkStyle,e.$uv.addStyle(e.customStyle)])},{default:m((()=>[S(C(e.text),1)])),_:1},8,["onClick","style"])}],["__scopeId","data-v-8ef8b695"]]);const de=Q({name:"uv-text",emits:["click"],mixins:[q,K,{computed:{value(){const{text:e,mode:t,format:l,href:a}=this;return"price"===t?J(l)?l(e):X(e,2):"date"===t?(!Y(e)&&ee(),J(l)?l(e):te(e,l||"yyyy-mm-dd")):"phone"===t?J(l)?l(e):"encrypt"===l?`${e.substr(0,3)}****${e.substr(7)}`:e:"name"===t?J(l)?l(e):"encrypt"===l?this.formatName(e):e:e}},methods:{formatName(e){let t="";if(2===e.length)t=e.substr(0,1)+"*";else if(e.length>2){let l="";for(let t=0,a=e.length-2;t<a;t++)l+="*";t=e.substr(0,1)+l+e.substr(-1,1)}else t=e;return t}}},{props:{type:{type:String,default:""},show:{type:Boolean,default:!0},text:{type:[String,Number],default:""},prefixIcon:{type:String,default:""},suffixIcon:{type:String,default:""},mode:{type:String,default:""},href:{type:String,default:""},format:{type:[String,Function],default:""},call:{type:Boolean,default:!0},openType:{type:String,default:""},bold:{type:Boolean,default:!1},block:{type:Boolean,default:!1},lines:{type:[String,Number],default:""},color:{type:String,default:"#303133"},size:{type:[String,Number],default:15},iconStyle:{type:[Object,String],default:()=>({fontSize:"15px"})},decoration:{type:String,default:"none"},margin:{type:[Object,String,Number],default:0},lineHeight:{type:[String,Number],default:""},align:{type:String,default:"left"},wordWrap:{type:String,default:"normal"},...null==(c=null==(r=uni.$uv)?void 0:r.props)?void 0:c.text}}],computed:{valueStyle(){const e={textDecoration:this.decoration,fontWeight:this.bold?"bold":"normal",wordWrap:this.wordWrap,fontSize:this.$uv.addUnit(this.size)};return!this.type&&(e.color=this.color),this.isNvue&&this.lines&&(e.lines=this.lines),!this.isNvue||"price"==this.mode||this.prefixIcon||this.suffixIcon||(e.flex=1,e.textAlign="left"===this.align?"flex-start":"center"===this.align?"center":"right"),this.lineHeight&&(e.lineHeight=this.$uv.addUnit(this.lineHeight)),!this.isNvue&&this.block&&(e.display="block"),this.$uv.deepMerge(e,this.$uv.addStyle(this.customStyle))},isNvue:()=>!1,isMp:()=>!1},data:()=>({}),methods:{clickHandler(){this.call&&"phone"===this.mode&&I({phoneNumber:this.text}),this.$emit("click")}}},[["render",function(e,t,l,a,i,s){const o=x,n=G(h("uv-icon"),Z),r=_,c=G(h("uv-link"),ue),u=z;return e.show?(p(),v(r,{key:0,class:f(["uv-text",[]]),style:k({margin:e.margin,justifyContent:"left"===e.align?"flex-start":"center"===e.align?"center":"flex-end"}),onClick:s.clickHandler},{default:m((()=>["price"===e.mode?(p(),v(o,{key:0,class:f(["uv-text__price",e.type&&`uv-text__value--${e.type}`]),style:k([s.valueStyle])},{default:m((()=>[S("￥")])),_:1},8,["class","style"])):w("",!0),e.prefixIcon?(p(),v(r,{key:1,class:"uv-text__prefix-icon"},{default:m((()=>[y(n,{name:e.prefixIcon,customStyle:e.$uv.addStyle(e.iconStyle)},null,8,["name","customStyle"])])),_:1})):w("",!0),"link"===e.mode?(p(),v(c,{key:2,text:e.value,href:e.href,underLine:""},null,8,["text","href"])):e.openType&&s.isMp?(p(),v(u,{key:3,class:"uv-reset-button uv-text__value",style:k([s.valueStyle]),openType:e.openType,onGetuserinfo:e.onGetUserInfo,onContact:e.onContact,onGetphonenumber:e.onGetPhoneNumber,onError:e.onError,onLaunchapp:e.onLaunchApp,onOpensetting:e.onOpenSetting,lang:e.lang,"session-from":e.sessionFrom,"send-message-title":e.sendMessageTitle,"send-message-path":e.sendMessagePath,"send-message-img":e.sendMessageImg,"show-message-card":e.showMessageCard,"app-parameter":e.appParameter},{default:m((()=>[S(C(e.value),1)])),_:1},8,["style","openType","onGetuserinfo","onContact","onGetphonenumber","onError","onLaunchapp","onOpensetting","lang","session-from","send-message-title","send-message-path","send-message-img","show-message-card","app-parameter"])):(p(),v(o,{key:4,class:f(["uv-text__value",[e.type&&`uv-text__value--${e.type}`,e.lines&&`uv-line-${e.lines}`]]),style:k([s.valueStyle])},{default:m((()=>[S(C(e.value),1)])),_:1},8,["style","class"])),e.suffixIcon?(p(),v(r,{key:5,class:"uv-text__suffix-icon"},{default:m((()=>[y(n,{name:e.suffixIcon,customStyle:e.$uv.addStyle(e.iconStyle)},null,8,["name","customStyle"])])),_:1})):w("",!0)])),_:1},8,["style","onClick"])):w("",!0)}],["__scopeId","data-v-4c65a453"]]);const he=Q({name:"uv-drop-down-item",mixins:[q,K],emits:["click"],props:{name:{type:[String,Number],default:""},type:{type:[String,Number],default:"2"},label:{type:[String],default:""},value:{type:[String,Number,null],default:""},isDrop:{type:Boolean,default:!1}},data:()=>({parentData:{defaultValue:[0,"0","all"],textSize:"30rpx",textColor:"#333",textActiveSize:"30rpx",textActiveColor:"#3c9cff",extraIcon:{},extraActiveIcon:{},sign:"",clickHandler:Function},active:!1,isDroped:!1,elId:""}),watch:{isDrop:{handler(e){this.isDroped=e},immediate:!0},value:{handler(e){this.$nextTick((()=>{this.active=-1==this.parentData.defaultValue.indexOf(e)}))},immediate:!0}},computed:{getDownIcon(){var e,t,l,a,i;const s={size:"30rpx",color:"#333",...this.parentData.extraIcon};return(this.active||this.isDroped)&&(s.color=(null==(e=this.parentData.extraActiveIcon)?void 0:e.color)?null==(t=this.parentData.extraActiveIcon)?void 0:t.color:"#3c9cff",s.size=(null==(l=this.parentData.extraActiveIcon)?void 0:l.size)?null==(a=this.parentData.extraActiveIcon)?void 0:a.size:"30rpx"),this.isDroped&&(s.name=null==(i=this.parentData.extraActiveIcon)?void 0:i.name),s},getTextStyle(){const e={size:this.parentData.textSize,color:this.parentData.textColor};return(this.active||this.isDroped)&&(e.size=this.parentData.textActiveSize,e.color=this.parentData.textActiveColor),e}},created(){this.init()},methods:{init(){this.elId=this.$uv.guid(),this.getParentData("uv-drop-down"),this.parent||this.$uv.error("uv-drop-down必须搭配uv-drop-down-item组件使用"),N("HANDLE_DROPDOWN_ONE",(e=>{this.isDroped&&this.elId!=e&&(this.isDroped=!1)})),N(`${this.parentData.sign}_CLOSEPOPUP`,(async()=>{this.isDroped&&(this.isDroped=!1)}))},async clickHandler(){let e={};switch(T("HANDLE_DROPDOWN_ONE",this.elId),+this.type){case 1:this.active=!this.active,e={name:this.name,active:this.active,type:this.type};break;case 2:this.isDroped=!this.isDroped,e={name:this.name,active:this.isDroped,type:this.type}}this.parentData.clickHandler(e),this.$emit("click",e),T(`${this.parentData.sign}_CLICKMENU`,{show:+this.type>1&&this.isDroped})}}},[["render",function(e,t,l,a,i,s){const o=G(h("uv-text"),de),n=G(h("uv-icon"),Z),r=_;return p(),v(r,{class:"uv-drop-down-item",onClick:s.clickHandler},{default:m((()=>[y(o,{text:l.label,size:s.getTextStyle.size,color:s.getTextStyle.color,lines:"1","custom-style":{marginRight:"10rpx",maxWidth:"200rpx"}},null,8,["text","size","color"]),-1==[1,"1"].indexOf(l.type)?(p(),v(n,{key:0,name:s.getDownIcon.name,size:s.getDownIcon.size,color:s.getDownIcon.color},null,8,["name","size","color"])):w("",!0)])),_:1},8,["onClick"])}],["__scopeId","data-v-b40c2852"]]);const pe=Q({name:"uv-drop-down-popup",mixins:[q,K],props:{sign:{type:[String,Number],default:"UVDROPDOWN"},zIndex:{type:[Number,String],default:999},opacity:{type:[Number,String],default:.5},clickOverlayOnClose:{type:Boolean,default:!0},currentDropItem:{type:Object,default:()=>({activeIndex:0,child:[]})},keyName:{type:String,default:"label"}},data:()=>({show:!1,rect:{},height:0}),computed:{overlayStyle(){let{height:e=0,top:t=0}=this.rect;t+=this.$uv.sys().windowTop;const l={position:"fixed",top:`${t+e}px`,left:0,right:0,zIndex:this.zIndex,bottom:0,"background-color":`rgba(0, 0, 0, ${this.opacity})`};return this.$uv.deepMerge(l,this.$uv.addStyle(this.customStyle))},list(){try{return Array.isArray(this.currentDropItem.child)?this.currentDropItem.child:[]}catch(e){return[]}},getTextColor(e){return e=>{const t=this.currentDropItem.activeIndex==e,l=this.currentDropItem.color,a=this.currentDropItem.activeColor;return t?a||"#3c9cff":l||"#333"}},getTextSize(e){return e=>{const t=this.currentDropItem.activeIndex==e,l=this.currentDropItem.size,a=this.currentDropItem.activeSize;return t?a||"30rpx":l||"30rpx"}},itemCustomStyle(){return e=>{const t={};return this.currentDropItem.activeIndex==e&&this.currentDropItem.itemActiveCustomStyle?this.$uv.deepMerge(t,this.$uv.addStyle(this.currentDropItem.itemActiveCustomStyle)):this.currentDropItem.itemCustomStyle?this.$uv.deepMerge(t,this.$uv.addStyle(this.currentDropItem.itemCustomStyle)):t}}},created(){this.init()},methods:{blockClick(){},clickHandler(e,t){this.currentDropItem.activeIndex=t,this.$emit("clickItem",e),this.close()},init(){O(`${this.sign}_GETRECT`),N(`${this.sign}_GETRECT`,(e=>{this.rect=e})),O(`${this.sign}_CLICKMENU`),N(`${this.sign}_CLICKMENU`,(async e=>{e.show?this.open():this.close()}))},open(){this.show=!0,this.$nextTick((async()=>{const e=await this.queryRect();this.height=e.height,this.$emit("popupChange",{show:!0})}))},close(){this.show&&(this.height=0,this.height=0,this.show=!1,T(`${this.sign}_CLOSEPOPUP`),this.$emit("popupChange",{show:!1}))},clickOverlay(){this.clickOverlayOnClose&&this.close()},queryRect(){return new Promise((e=>{this.$uvGetRect(".uv-dp__container__list").then((t=>{e(t)}))}))},animation(e,t=200){}}},[["render",function(e,t,l,a,i,s){const o=G(h("uv-text"),de),n=_,r=G(h("uv-transition"),le);return p(),v(n,{class:"uv-drop-down-popup"},{default:m((()=>[y(r,{show:i.show,mode:"fade",duration:300,"custom-style":s.overlayStyle,onClick:s.clickOverlay},{default:m((()=>[y(n,{class:"uv-dp__container",ref:"uvDPContainer",style:k({height:`${i.height}px`}),onClick:g(s.blockClick,["stop"])},{default:m((()=>[y(n,{class:"uv-dp__container__list",ref:"uvDPList"},{default:m((()=>[b(e.$slots,"default",{},(()=>[(p(!0),B(A,null,E(s.list,((e,t)=>(p(),v(n,{class:"uv-dp__container__list--item",key:t,onClick:l=>s.clickHandler(e,t),style:k([s.itemCustomStyle(t)])},{default:m((()=>[y(o,{text:e[l.keyName],size:s.getTextSize(t),color:s.getTextColor(t)},null,8,["text","size","color"])])),_:2},1032,["onClick","style"])))),128))]),!0)])),_:3},512)])),_:3},8,["style","onClick"])])),_:3},8,["show","custom-style","onClick"])])),_:3})}],["__scopeId","data-v-b03b5031"]]);const ve=Q({name:"uv-sticky",mixins:[q,K,{props:{offsetTop:{type:[String,Number],default:0},customNavHeight:{type:[String,Number],default:44},disabled:{type:Boolean,default:!1},bgColor:{type:String,default:"transparent"},zIndex:{type:[String,Number],default:""},index:{type:[String,Number],default:""},...null==(d=null==(u=uni.$uv)?void 0:u.props)?void 0:d.sticky}}],data:()=>({cssSticky:!1,stickyTop:0,elId:"",left:0,width:"auto",height:"auto",fixed:!1}),computed:{style(){const e={};return this.disabled?e.position="static":this.cssSticky?(e.position="sticky",e.zIndex=this.uZindex,e.top=this.$uv.addUnit(this.stickyTop)):e.height=this.fixed?this.height+"px":"auto",e.backgroundColor=this.bgColor,this.$uv.deepMerge(e,this.$uv.addStyle(this.customStyle))},stickyContent(){const e={};return this.cssSticky||(e.position=this.fixed?"fixed":"static",e.top=this.stickyTop+"px",e.left=this.left+"px",e.width="auto"==this.width?"auto":this.width+"px",e.zIndex=this.uZindex),e},uZindex(){return this.zIndex?this.zIndex:970}},created(){this.elId=this.$uv.guid()},mounted(){this.init()},methods:{init(){this.getStickyTop(),this.checkSupportCssSticky(),this.cssSticky||!this.disabled&&this.initObserveContent()},initObserveContent(){this.$uvGetRect("#"+this.elId).then((e=>{this.height=e.height,this.left=e.left,this.width=e.width,this.$nextTick((()=>{this.observeContent()}))}))},observeContent(){this.disconnectObserver("contentObserver");const e=H({thresholds:[.95,.98,1]});e.relativeToViewport({top:-this.stickyTop}),e.observe(`#${this.elId}`,(e=>{this.setFixed(e.boundingClientRect.top)})),this.contentObserver=e},setFixed(e){const t=e<=this.stickyTop;this.fixed=t},disconnectObserver(e){const t=this[e];t&&t.disconnect()},getStickyTop(){this.stickyTop=this.$uv.getPx(this.offsetTop)+this.$uv.getPx(this.customNavHeight)},async checkSupportCssSticky(){this.checkCssStickyForH5()&&(this.cssSticky=!0),"android"===this.$uv.os()&&Number(this.$uv.sys().system)>8&&(this.cssSticky=!0),"ios"===this.$uv.os()&&(this.cssSticky=!0)},checkComputedStyle(){},checkCssStickyForH5(){const e=["","-webkit-","-ms-","-moz-","-o-"],t=e.length,l=document.createElement("div");for(let a=0;a<t;a++)if(l.style.position=e[a]+"sticky",""!==l.style.position)return!0;return!1}},unmounted(){this.disconnectObserver("contentObserver")}},[["render",function(e,t,l,a,i,s){const o=_;return p(),v(o,{class:"uv-sticky",id:i.elId,style:k([s.style])},{default:m((()=>[y(o,{style:k([s.stickyContent]),class:"uv-sticky__content"},{default:m((()=>[b(e.$slots,"default",{},void 0,!0)])),_:3},8,["style"])])),_:3},8,["id","style"])}],["__scopeId","data-v-d4aa64a4"]]);const me=Q({name:"uv-drop-down",mixins:[q,K],emits:["click"],props:{isSticky:{type:Boolean,default:!0},sign:{type:[String,Number],default:"UVDROPDOWN"},defaultValue:{type:Array,default:()=>[0,"0","all"]},textSize:{type:String,default:"30rpx"},textColor:{type:String,default:"#333"},textActiveSize:{type:String,default:"30rpx"},textActiveColor:{type:String,default:"#3c9cff"},extraIcon:{type:Object,default:()=>({name:"arrow-down",size:"30rpx",color:"#333"})},extraActiveIcon:{type:Object,default:()=>({name:"arrow-up",size:"30rpx",color:"#3c9cff"})}},computed:{parentData(){return[this.defaultValue,this.textSize,this.textColor,this.textActiveColor,this.textActiveSize,this.extraIcon,this.extraActiveIcon,this.sign,this.clickHandler]}},mounted(){this.init()},methods:{init(){T(`${this.sign}_CLICKMENU`,{show:!1}),this.$nextTick((async()=>{const e=await this.queryRect();T(`${this.sign}_GETRECT`,e)}))},queryRect(){return new Promise((e=>{this.$uvGetRect(".uv-drop-down").then((t=>{e(t)}))}))},clickHandler(e){this.$emit("click",e)}}},[["render",function(e,t,l,a,i,s){const o=_,n=G(h("uv-sticky"),ve);return p(),v(n,{disabled:!l.isSticky},{default:m((()=>[y(o,{ref:"dropDownRef",class:"uv-drop-down",style:k([e.$uv.addStyle(e.customStyle)])},{default:m((()=>[b(e.$slots,"default",{},void 0,!0)])),_:3},8,["style"])])),_:3},8,["disabled"])}],["__scopeId","data-v-64391769"]]),ye=Q({__name:"cook",setup(e){const t=P("");V((()=>{t.value=L().windowHeight})),W((()=>{}));const l=P([]),a=P([""]),i=P(new Set),s=P([{name:"煮锅",value:"cook1",disabled:!1},{name:"烤架",value:"cook2",disabled:!1},{name:"油锅",value:"cook3",disabled:!1},{name:"蒸锅",value:"cook4",disabled:!1},{name:"料理台",value:"cook5",disabled:!1}]),o=e=>{i.value.clear(),e.forEach((e=>{i.value.add(e)})),T()},n=P({label:"默认排序",value:"normal"}),r=P({label:"默认排序",value:"normal",activeIndex:0,color:"#dbaa9b",activeColor:"#d3aa76",child:[{label:"默认排序",value:"normal"},{label:"价格升序",value:"moneyUp"},{label:"价格降序",value:"moneyDown"}]}),c=e=>{n.value.label=e.label,n.value.value=e.value,T()},u=P(j("cookTagData")),d=P(j("cookTagData")),f=P(j("cookData")),g=P(j("materialData")),b=P(new Set),x=P(new Set);g.value.forEach((e=>{e.tag.split(",").forEach((e=>{e.trim()&&b.value.add(e.trim())}))}));const D=P(""),$=P(new Set),I=P(new Set),z=P(new Set),N=P(""),T=e=>{D.value=f.value.filter((e=>{if(N.value&&!e.chinese.includes(N.value))return!1;let t=e.tag.split(","),l=e.material.split(","),a=[...$.value].concat();[...I.value].concat();let s=[...z.value].concat(),o=new Set;return!(t.length<$.value.size)&&(!(i.value.size>0&&!i.value.has(e.cooker))&&(t.forEach((e=>{a=a.filter((t=>t!==e.trim())),I.value.forEach((t=>{t===e.trim()&&o.add(t)}))})),l.forEach((e=>{s=s.filter((t=>t!==e.trim()))})),0===a.length&&0===o.size&&0===s.length))})),"moneyUp"===n.value.value?D.value=D.value.sort(((e,t)=>e.money-t.money)):"moneyDown"===n.value.value&&(D.value=D.value.sort(((e,t)=>-(e.money-t.money)))),(()=>{l.value.splice(0);let e=D.value.length<20?D.value.length:20;for(let t=0;t<e;t++)l.value.push(D.value[t]);setTimeout((()=>{l.value=D.value}),100)})()};T();const O=P(!1),H=P(""),q=e=>{H.value="",x.value.clear(),"like"===e?H.value={type:e,value:u.value}:"dislike"===e?H.value={type:e,value:d.value}:"material"===e&&(H.value={type:e,value:g.value}),O.value.open()},K=e=>{"like"===e?$.value.clear():"dislike"===e?I.value.clear():"material"===e&&z.value.clear(),T()},Z=(e,t)=>{"like"===e?$.value.has(t)?$.value.delete(t):$.value.add(t):"dislike"===e?I.value.has(t)?I.value.delete(t):I.value.add(t):"material"===e&&(z.value.has(t)?z.value.delete(t):z.value.add(t)),T()};return(e,i)=>{const u=_,d=G(h("uv-scroll-list"),F),f=G(h("uv-checkbox"),ne),P=G(h("uv-checkbox-group"),re),V=G(h("uv-search"),ce),j=G(h("uv-drop-down-item"),he),L=G(h("uv-drop-down-popup"),pe),W=G(h("uv-drop-down"),me),Q=M,J=G(h("uv-modal"),ae),X=G(h("GlobalChatButton"),ie);return p(),B(A,null,[y(u,{class:"cook",style:k({height:t.value-55+"px"})},{default:m((()=>[y(u,{class:"cook-view"},{default:m((()=>[y(u,{class:"tag-filter"},{default:m((()=>[y(u,{class:"touhou-tag",onClick:i[0]||(i[0]=e=>q("like"))},{default:m((()=>[S("喜爱")])),_:1}),y(d,{class:"tag-scroll",indicator:!1},{default:m((()=>[(p(!0),B(A,null,E($.value,(e=>(p(),v(u,{class:"touhou-tag",key:e,onClick:t=>Z("like",e)},{default:m((()=>[S(C(e),1),y(u,{class:"touhou-tag-select"})])),_:2},1032,["onClick"])))),128))])),_:1}),$.value.size>0?(p(),v(u,{key:0,class:"touhou-tag",onClick:i[1]||(i[1]=e=>K("like"))},{default:m((()=>[S("清空")])),_:1})):w("",!0)])),_:1}),y(u,{class:"tag-filter"},{default:m((()=>[y(u,{class:"touhou-notag-left",onClick:i[2]||(i[2]=e=>q("dislike"))},{default:m((()=>[S("厌恶")])),_:1}),y(d,{class:"tag-scroll",indicator:!1},{default:m((()=>[(p(!0),B(A,null,E(I.value,(e=>(p(),v(u,{class:"touhou-notag-left",key:e,onClick:t=>Z("dislike",e)},{default:m((()=>[S(C(e),1),y(u,{class:"touhou-notag-left-select"})])),_:2},1032,["onClick"])))),128))])),_:1}),I.value.size>0?(p(),v(u,{key:0,class:"touhou-tag",onClick:i[3]||(i[3]=e=>K("dislike"))},{default:m((()=>[S("清空")])),_:1})):w("",!0)])),_:1}),y(u,{class:"tag-filter"},{default:m((()=>[y(u,{class:"drink-tag",onClick:i[4]||(i[4]=e=>q("material"))},{default:m((()=>[S("食材")])),_:1}),y(d,{class:"tag-scroll",indicator:!1},{default:m((()=>[(p(!0),B(A,null,E(z.value,(e=>(p(),v(u,{class:"drink-tag",key:e,onClick:t=>Z("material",e)},{default:m((()=>[S(C(e),1),y(u,{class:"drink-tag-select"})])),_:2},1032,["onClick"])))),128))])),_:1}),z.value.size>0?(p(),v(u,{key:0,class:"touhou-tag",onClick:i[5]||(i[5]=e=>K("material"))},{default:m((()=>[S("清空")])),_:1})):w("",!0)])),_:1}),y(u,{class:"cooker-select"},{default:m((()=>[y(P,{modelValue:a.value,"onUpdate:modelValue":i[6]||(i[6]=e=>a.value=e),placement:"row",labelColor:"#e6b4a6",labelSize:"16px",activeColor:"#8d6549",inactiveColor:"#fbefcb",onChange:o},{default:m((()=>[(p(!0),B(A,null,E(s.value,((e,t)=>(p(),v(f,{key:t,label:e.name,name:e.value},null,8,["label","name"])))),128))])),_:1},8,["modelValue"])])),_:1}),y(u,{class:"cook-total"},{default:m((()=>[y(u,{class:"cook-total-view",style:{width:"50%"}},{default:m((()=>[y(V,{placeholder:"请输入料理名称",modelValue:N.value,"onUpdate:modelValue":i[7]||(i[7]=e=>N.value=e),bgColor:"#8D6549",borderColor:"#FBEFCB",searchIconColor:"#e0afa0",color:"#e0afa0",showAction:!1,height:"55rpx",onChange:i[8]||(i[8]=e=>T(""))},null,8,["modelValue"])])),_:1}),y(u,{class:"cook-total-view",style:{width:"30%"}},{default:m((()=>[y(W,{sign:"cookSort","text-color":"#dbaa9b","text-active-color":"#d3aa76",defaultValue:[0,"0","normal"]},{default:m((()=>[y(j,{name:"normal",type:"2",label:n.value.label,value:n.value.value},null,8,["label","value"]),y(L,{sign:"cookSort",onClickItem:c,currentDropItem:r.value},null,8,["currentDropItem"])])),_:1})])),_:1}),y(u,{class:"cook-total-view",style:{width:"10%",color:"#e0afa0"}},{default:m((()=>[S(C("总数\n"+D.value.length),1)])),_:1})])),_:1})])),_:1}),y(oe,{type:"cook",cookShow:l.value,cookFilter:$.value},null,8,["cookShow","cookFilter"]),y(J,{ref_key:"tagModal",ref:O,showConfirmButton:!1},{default:m((()=>[y(u,{class:"modal-div"},{default:m((()=>["like"===H.value.type?(p(),v(u,{key:0,class:"modal-div-tag"},{default:m((()=>[(p(!0),B(A,null,E(H.value.value,(e=>(p(),v(u,{class:"touhou-tag",key:e,onClick:t=>Z(H.value.type,e)},{default:m((()=>[S(C(e),1),$.value.has(e)?(p(),v(u,{key:0,class:"touhou-tag-select"})):w("",!0)])),_:2},1032,["onClick"])))),128))])),_:1})):w("",!0),"dislike"===H.value.type?(p(),v(u,{key:1,class:"modal-div-tag"},{default:m((()=>[(p(!0),B(A,null,E(H.value.value,(e=>(p(),v(u,{class:"touhou-notag-left",key:e,onClick:t=>Z(H.value.type,e)},{default:m((()=>[S(C(e),1),I.value.has(e)?(p(),v(u,{key:0,class:"touhou-notag-left-select"})):w("",!0)])),_:2},1032,["onClick"])))),128))])),_:1})):w("",!0),"material"===H.value.type?(p(),v(u,{key:2,class:"modal-div-tag"},{default:m((()=>[y(u,{class:"material-div"},{default:m((()=>[y(u,{class:"matrial-tag"},{default:m((()=>[(p(!0),B(A,null,E(b.value,(e=>(p(),v(u,{class:"drink-tag",key:e,onClick:t=>{return l=e,x.value.has(l)?x.value.delete(l):x.value.add(l),void(H.value.value=g.value.filter((e=>{let t=e.tag.split(","),l=[...x.value].concat();return t.forEach((e=>{l=l.filter((t=>t!==e.trim()))})),0===l.length})));var l}},{default:m((()=>[S(C(e),1),x.value.has(e)?(p(),v(u,{key:0,class:"drink-tag-select"})):w("",!0)])),_:2},1032,["onClick"])))),128))])),_:1}),y(u,{class:"matrial-div-div"},{default:m((()=>[(p(!0),B(A,null,E(H.value.value,(e=>(p(),v(u,{class:"material-item",key:e,onClick:t=>Z(H.value.type,e.chinese)},{default:m((()=>[y(u,{class:"material-item-left"},{default:m((()=>[y(Q,{src:"/static/img/material/"+e.name+".png",style:{width:"50px",height:"50px"},mode:"scaleToFill","lazy-load":"true"},null,8,["src"])])),_:2},1024),y(u,{class:"material-item-middle"},{default:m((()=>[y(u,null,{default:m((()=>[S(C(e.chinese)+" ￥"+C(e.money)+" - Lv "+C(e.level),1)])),_:2},1024),e.tag?(p(),v(u,{key:0,class:"material-item-middle-tag"},{default:m((()=>[(p(!0),B(A,null,E(e.tag.split(","),(e=>(p(),v(u,{class:"drink-tag",key:e},{default:m((()=>[S(C(e.trim()),1),x.value.has(e.trim())?(p(),v(u,{key:0,class:"drink-tag-select"})):w("",!0)])),_:2},1024)))),128))])),_:2},1024)):w("",!0)])),_:2},1024),R(y(u,{class:"material-item-right"},null,512),[[U,z.value.has(e.chinese)]])])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1})])),_:1})):w("",!0)])),_:1})])),_:1},512)])),_:1},8,["style"]),y(se,{selected:1}),y(X)],64)}}},[["__scopeId","data-v-7158deed"]]);export{ye as default};
