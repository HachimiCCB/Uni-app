var t,e,o,i,n,l,a,s,r,c;import{e as u,o as d,c as m,w as p,r as g,a as y,k as f,n as h,f as v,F as S,l as _,j as C,t as k,i as b,D as x,H as w,I as $,C as z,G as T,b as N,R as I,T as B,q as D,U as P,V as j,N as U}from"./index-GtydPhVv.js";import{_ as R,m as M,a as L,r as A,d as H}from"./uv-safe-bottom.DWGvcUcV.js";import{a as G,_ as q}from"./uv-modal.vue_vue_type_style_index_0_scoped_6a64dca2_lang.D1XXXXMA.js";import{a as F,_ as V}from"./uv-modal.MWfePgvv.js";import{t as E}from"./tabBar.C1GSFUni.js";import{i as J}from"./common.CRQQSQR3.js";const K=R({emits:["click","close","change"],mixins:[M,L,{props:{text:{type:[Array],default:""},icon:{type:[String,Boolean,null],default:"volume"},mode:{type:String,default:""},color:{type:String,default:"#f9ae3d"},bgColor:{type:String,default:"#fdf6ec"},fontSize:{type:[String,Number],default:14},speed:{type:[String,Number],default:80},step:{type:Boolean,default:!1},duration:{type:[String,Number],default:1500},disableTouch:{type:Boolean,default:!0},disableScroll:{type:Boolean,default:!1},...null==(e=null==(t=uni.$uv)?void 0:t.props)?void 0:e.columnNotice}}],watch:{text:{immediate:!0,handler(t,e){this.$uv.test.array(t)||this.$uv.error("noticebar组件direction为column时，要求text参数为数组形式")}}},computed:{textStyle(){let t={};return t.color=this.color,t.fontSize=this.$uv.addUnit(this.fontSize),t},vertical(){return"horizontal"!=this.mode},swiperStyle:()=>({})},data:()=>({index:0}),methods:{noticeChange(t){this.index=t.detail.current,this.$emit("change",this.index)},clickHandler(){this.$emit("click",this.index)},close(){this.$emit("close")}}},[["render",function(t,e,o,i,n,l){const a=A(u("uv-icon"),H),s=b,r=x,c=w,z=$;return d(),m(s,{class:"uv-notice",onClick:l.clickHandler},{default:p((()=>[g(t.$slots,"icon",{},(()=>[t.icon?(d(),m(s,{key:0,class:"uv-notice__left-icon"},{default:p((()=>[y(a,{name:t.icon,color:t.color,size:"19"},null,8,["name","color"])])),_:1})):f("",!0)]),!0),y(z,{"disable-touch":t.disableTouch,vertical:!t.step,circular:"",interval:t.duration,autoplay:!t.disableScroll,class:"uv-notice__swiper",style:h([l.swiperStyle]),onChange:l.noticeChange},{default:p((()=>[(d(!0),v(S,null,_(t.text,((t,e)=>(d(),m(c,{key:e,class:"uv-notice__swiper__item"},{default:p((()=>[y(r,{class:"uv-notice__swiper__item__text uv-line-1",style:h([l.textStyle])},{default:p((()=>[C(k(t),1)])),_:2},1032,["style"])])),_:2},1024)))),128))])),_:1},8,["disable-touch","vertical","interval","autoplay","style","onChange"]),["link","closable"].includes(t.mode)?(d(),m(s,{key:0,class:"uv-notice__right-icon"},{default:p((()=>["link"===t.mode?(d(),m(a,{key:0,name:"arrow-right",size:17,color:t.color},null,8,["color"])):f("",!0),"closable"===t.mode?(d(),m(a,{key:1,name:"close",size:16,color:t.color,onClick:l.close},null,8,["color","onClick"])):f("",!0)])),_:1})):f("",!0)])),_:3},8,["onClick"])}],["__scopeId","data-v-23099dc5"]]);const O=R({name:"uv-row-notice",emits:["click","close"],mixins:[M,L,{props:{text:{type:String,default:""},icon:{type:[String,Boolean,null],default:"volume"},mode:{type:String,default:""},color:{type:String,default:"#f9ae3d"},bgColor:{type:String,default:"#fdf6ec"},fontSize:{type:[String,Number],default:14},speed:{type:[String,Number],default:80},...null==(i=null==(o=uni.$uv)?void 0:o.props)?void 0:i.rowNotice}}],data:()=>({animationDuration:"0",animationPlayState:"paused",nvueInit:!0,show:!0}),watch:{text:{immediate:!0,handler(t,e){this.vue(),this.$uv.test.string(t)||this.$uv.error("noticebar组件direction为row时，要求text参数为字符串形式")}},fontSize(){this.vue()},speed(){this.vue()}},computed:{textStyle(){let t={};return t.color=this.color,t.fontSize=this.$uv.addUnit(this.fontSize),t},animationStyle(){let t={};return t.animationDuration=this.animationDuration,t.animationPlayState=this.animationPlayState,t},innerText(){let t=[];const e=this.text?this.text.split(""):[];for(let o=0;o<e.length;o+=20)t.push(e.slice(o,o+20).join(""));return t}},mounted(){this.init()},methods:{init(){this.vue(),this.$uv.test.string(this.text)||this.$uv.error("noticebar组件direction为row时，要求text参数为字符串形式")},async vue(){let t=0;await this.$uv.sleep(),t=(await this.$uvGetRect(".uv-notice__content__text")).width,(await this.$uvGetRect(".uv-notice__content")).width,this.animationDuration=t/this.$uv.getPx(this.speed)+"s",this.animationPlayState="paused",setTimeout((()=>{this.animationPlayState="running"}),10)},async nvue(){},loopAnimation(t,e){},getNvueRect(t){},clickHandler(t){this.$emit("click")},close(){this.$emit("close")}}},[["render",function(t,e,o,i,n,l){const a=A(u("uv-icon"),H),s=b,r=x;return d(),m(s,{class:"uv-notice",onClick:l.clickHandler},{default:p((()=>[g(t.$slots,"icon",{},(()=>[t.icon?(d(),m(s,{key:0,class:"uv-notice__left-icon"},{default:p((()=>[y(a,{name:t.icon,color:t.color,size:"19"},null,8,["name","color"])])),_:1})):f("",!0)]),!0),y(s,{class:"uv-notice__content",ref:"uv-notice__content"},{default:p((()=>[y(s,{ref:"uv-notice__content__text",class:"uv-notice__content__text",style:h([l.animationStyle])},{default:p((()=>[(d(!0),v(S,null,_(l.innerText,((t,e)=>(d(),m(r,{key:e,style:h([l.textStyle])},{default:p((()=>[C(k(t),1)])),_:2},1032,["style"])))),128))])),_:1},8,["style"])])),_:1},512),["link","closable"].includes(t.mode)?(d(),m(s,{key:0,class:"uv-notice__right-icon"},{default:p((()=>["link"===t.mode?(d(),m(a,{key:0,name:"arrow-right",size:17,color:t.color},null,8,["color"])):f("",!0),"closable"===t.mode?(d(),m(a,{key:1,onClick:l.close,name:"close",size:16,color:t.color},null,8,["onClick","color"])):f("",!0)])),_:1})):f("",!0)])),_:3},8,["onClick"])}],["__scopeId","data-v-f581b263"]]);const Q=R({name:"uv-notice-bar",emits:["click","close","change"],mixins:[M,L,{props:{text:{type:[Array,String],default:()=>[]},direction:{type:String,default:"row"},step:{type:Boolean,default:!1},icon:{type:[String,Boolean,null],default:"volume"},mode:{type:String,default:""},color:{type:String,default:"#f9ae3d"},bgColor:{type:String,default:"#fdf6ec"},speed:{type:[String,Number],default:80},fontSize:{type:[String,Number],default:14},duration:{type:[String,Number],default:2e3},url:{type:String,default:""},linkType:{type:String,default:"navigateTo"},disableTouch:{type:Boolean,default:!0},disableScroll:{type:Boolean,default:!1},...null==(l=null==(n=uni.$uv)?void 0:n.props)?void 0:l.noticeBar}}],data:()=>({show:!0}),methods:{click(t){this.$emit("click",t),this.url&&this.linkType&&this.openPage()},close(){this.show=!1,this.$emit("close")},change(t){this.$emit("change",t)}}},[["render",function(t,e,o,i,n,l){const a=A(u("uv-column-notice"),K),s=A(u("uv-row-notice"),O),r=b;return n.show?(d(),m(r,{key:0,class:"uv-notice-bar",style:h([{backgroundColor:t.bgColor},t.$uv.addStyle(t.customStyle)])},{default:p((()=>["column"===t.direction||"row"===t.direction&&t.step?(d(),m(a,{key:0,color:t.color,bgColor:t.bgColor,text:t.text,mode:t.mode,step:t.step,icon:t.icon,"disable-touch":t.disableTouch,"disable-scroll":t.disableScroll,fontSize:t.fontSize,duration:t.duration,onClose:l.close,onClick:l.click,onChange:l.change},null,8,["color","bgColor","text","mode","step","icon","disable-touch","disable-scroll","fontSize","duration","onClose","onClick","onChange"])):(d(),m(s,{key:1,color:t.color,bgColor:t.bgColor,text:t.text,mode:t.mode,fontSize:t.fontSize,speed:t.speed,url:t.url,linkType:t.linkType,icon:t.icon,onClose:l.close,onClick:l.click},null,8,["color","bgColor","text","mode","fontSize","speed","url","linkType","icon","onClose","onClick"]))])),_:1},8,["style"])):f("",!0)}],["__scopeId","data-v-d0b0fe18"]]);const W=R({name:"uv-gap",mixins:[M,L,{props:{bgColor:{type:String,default:"transparent"},height:{type:[String,Number],default:20},marginTop:{type:[String,Number],default:0},marginBottom:{type:[String,Number],default:0},...null==(s=null==(a=uni.$uv)?void 0:a.props)?void 0:s.gap}}],computed:{gapStyle(){const t={backgroundColor:this.bgColor,height:this.$uv.addUnit(this.height),marginTop:this.$uv.addUnit(this.marginTop),marginBottom:this.$uv.addUnit(this.marginBottom)};return this.$uv.deepMerge(t,this.$uv.addStyle(this.customStyle))}}},[["render",function(t,e,o,i,n,l){const a=b;return d(),m(a,{class:"uv-gap",style:h([l.gapStyle])},null,8,["style"])}]]);const X=R({name:"uv-toast",mixins:[M,L],data:()=>({isShow:!1,timer:null,config:{message:"",type:"",duration:2e3,icon:!0,position:"center",complete:null,overlay:!0,loading:!1,zIndex:10090},tmpConfig:{},rect:{},opacity:0}),computed:{iconName(){return this.tmpConfig.icon&&"none"!=this.tmpConfig.icon&&["error","warning","success","primary"].includes(this.tmpConfig.type)?this.$uv.type2icon(this.tmpConfig.type):""},overlayStyle(){const t={justifyContent:"center",alignItems:"center",display:"flex",zIndex:this.tmpConfig.zIndex,backgroundColor:"rgba(0, 0, 0, 0)"};return t},iconStyle(){const t={marginRight:"4px"};return t},aniStyle(){return{position:"fixed",zIndex:this.tmpConfig.zIndex}},contentStyle(){this.$uv.sys();const t={position:"fixed",top:"50%",left:"50%"};let e=0;return"top"===this.tmpConfig.position?t.top="25%":"bottom"===this.tmpConfig.position?t.top="75%":e="-50%",t.transform=`translate(-50%,${e})`,t}},created(){["primary","success","error","warning","default","loading"].map((t=>{this[t]=e=>this.show({type:t,message:e})}))},methods:{show(t){this.tmpConfig=this.$uv.deepMerge(this.config,t),this.clearTimer(),this.isShow=!0,this.timer=setTimeout((()=>{this.clearTimer(),"function"==typeof this.tmpConfig.complete&&this.tmpConfig.complete()}),this.tmpConfig.duration)},queryRect(){return new Promise((t=>{const e=this.$refs.uvToastContent;dom.getComponentRect(e,(e=>{t(e.size)}))}))},hide(){this.clearTimer()},clearTimer(){this.isShow=!1,clearTimeout(this.timer),this.timer=null}},unmounted(){this.clearTimer()}},[["render",function(t,e,o,i,n,l){const a=A(u("uv-overlay"),G),s=A(u("uv-loading-icon"),F),r=A(u("uv-icon"),H),c=A(u("uv-gap"),W),g=x,v=b,S=A(u("uv-transition"),q);return d(),m(v,{class:"uv-toast"},{default:p((()=>[y(a,{show:n.isShow&&n.tmpConfig.overlay,"custom-style":l.overlayStyle},null,8,["show","custom-style"]),y(S,{show:n.isShow,mode:"fade","custom-style":l.aniStyle},{default:p((()=>[y(v,{class:z(["uv-toast__content",["uv-type-"+n.tmpConfig.type,"loading"===n.tmpConfig.type||n.tmpConfig.loading?"uv-toast__content--loading":""]]),ref:"uvToastContent",style:h([l.contentStyle])},{default:p((()=>["loading"===n.tmpConfig.type?(d(),m(s,{key:0,mode:"circle",color:"rgb(255, 255, 255)",inactiveColor:"rgb(120, 120, 120)",size:"25"})):"defalut"!==n.tmpConfig.type&&l.iconName?(d(),m(r,{key:1,name:l.iconName,size:"17",color:n.tmpConfig.type,customStyle:l.iconStyle},null,8,["name","color","customStyle"])):f("",!0),"loading"===n.tmpConfig.type||n.tmpConfig.loading?(d(),m(c,{key:2,height:"12",bgColor:"transparent"})):f("",!0),y(g,{class:z(["uv-toast__content__text",["uv-toast__content__text--"+n.tmpConfig.type]]),style:{"max-width":"400rpx"}},{default:p((()=>[C(k(n.tmpConfig.message),1)])),_:1},8,["class"])])),_:1},8,["style","class"])])),_:1},8,["show","custom-style"])])),_:1})}],["__scopeId","data-v-618db97c"]]);const Y=R({name:"uv-loading-page",mixins:[M,L,{props:{loadingText:{type:[String,Number],default:""},image:{type:String,default:""},loadingMode:{type:String,default:"circle"},loading:{type:Boolean,default:!1},bgColor:{type:String,default:"#fff"},color:{type:String,default:"#C8C8C8"},fontSize:{type:[String,Number],default:16},iconSize:{type:[String,Number],default:26},loadingColor:{type:String,default:"#C8C8C8"},duration:{type:[String,Number],default:300},...null==(c=null==(r=uni.$uv)?void 0:r.props)?void 0:c.loadingPage}}],data:()=>({showLoading:!1,opacity:1}),watch:{loading:{immediate:!0,handler(t){t?(this.showLoading=!0,this.opacity=1):(this.opacity=0,this.$nextTick((()=>{this.$uv.sleep(this.duration).then((t=>{this.showLoading=!1}))})))}}},computed:{loadingPageStyle(){const t={position:"fixed",top:"0",left:"0",right:"0",bottom:"0",zIndex:"999","background-color":this.bgColor,"transition-duration":`${this.duration}ms`,opacity:this.opacity};return this.$uv.deepMerge(t,this.$uv.addStyle(this.customStyle))}}},[["render",function(t,e,o,i,n,l){const a=T,s=A(u("uv-loading-icon"),F),r=x,c=b;return n.showLoading?(d(),m(c,{key:0,class:"uv-loading-page uv-flex-column",style:h([l.loadingPageStyle])},{default:p((()=>[""!=t.image?(d(),m(a,{key:0,src:t.image,class:"uv-loading-page__img",mode:"widthFit",style:h([{width:t.$uv.addUnit(t.iconSize),height:t.$uv.addUnit(t.iconSize)}])},null,8,["src","style"])):(d(),m(s,{key:1,mode:t.loadingMode,size:t.iconSize,color:t.loadingColor},null,8,["mode","size","color"])),g(t.$slots,"default",{},(()=>[y(r,{class:"uv-loading-page__text",style:h([{fontSize:t.$uv.addUnit(t.fontSize),color:t.color}])},{default:p((()=>[C(k(t.loadingText),1)])),_:1},8,["style"])]),!0)])),_:3},8,["style"])):f("",!0)}],["__scopeId","data-v-812c64fa"]]),Z=R({__name:"setting",setup(t){const e=N("关注Anon Tokyo喵，关注Anon Tokyo谢谢喵!!!!");I({npc:"npcData",npcRecommend:"npcData",location:"locationData",drink:"drinksData",cook:"cookData",matrial:"materialData",drinksTag:"drinkTagData",cookTag:"cookTagData"});const o=N(!1),i=N(""),n=t=>{i.value.show({...t,complete(){t.url&&D({url:t.url})}})},l=N(""),a=N(""),s=N(""),r=()=>{if("android"===c.value)try{plus.runtime.restart()}catch(t){j({url:"npc"})}},c=N("");return B({success:t=>{c.value=t.platform.toLowerCase(),console.log("getSystemInfo",t.platform.toLowerCase())},fail:t=>{console.log("getSystemInfo",t),n({type:"error",message:"getSystemInfo error!"+t,duration:2e3})}}),(t,c)=>{const m=A(u("uv-notice-bar"),Q),g=A(u("uv-toast"),X),f=U,h=b,_=A(u("uv-loading-page"),Y),k=A(u("uv-modal"),V);return d(),v(S,null,[y(h,{class:"setting"},{default:p((()=>[y(m,{text:e.value,color:"#830000"},null,8,["text"]),y(g,{ref_key:"toast",ref:i},null,512),y(f,{onClick:c[0]||(c[0]=t=>r())},{default:p((()=>[C("重启应用")])),_:1})])),_:1}),y(_,{loading:o.value,"loading-text":"读取中...","font-size":"20px","loading-mode":"semicircle",bgColor:"#8D6549"},null,8,["loading"]),y(k,{ref_key:"clearCacheModal",ref:l,content:"该操作会将所有数据重置!应用会自动重启!",showCancelButton:!0,onConfirm:c[1]||(c[1]=t=>(P(),J(),n({type:"success",message:"缓存重置成功!",duration:500}),void r()))},null,512),y(k,{ref_key:"confirmModal",ref:s,content:a.value},null,8,["content"]),y(E,{selected:3})],64)}}},[["__scopeId","data-v-6ed3c275"]]);export{Z as default};
