import{r as a,U as e,V as o,W as s,a as t,c as n,b as l,w as r,F as u,g as i,m as c,X as m,i as d,o as p,h as g,f as _,t as f,Y as v,Z as k,D as y,N as j}from"./index-yJ4PhItL.js";import{_ as b,a as I,b as C}from"./uv-loading-page.1lDLi1iZ.js";import{o as x,r as D}from"./uni-app.es.B94_6v_V.js";import{a as h}from"./uv-modal.Cp3Wc0LV.js";import{t as w}from"./tabBar.DlXmd0ww.js";import{_ as T}from"./GlobalChatButton.DgQ5PF1e.js";import{i as B}from"./common.3FQGb_nv.js";import{_ as S}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./uv-icon.BQxwY_F2.js";import"./uv-icon.vue_vue_type_style_index_0_scoped_eab170a5_lang.DdJGWjg1.js";import"./uv-safe-bottom.gY7JiN5M.js";import"./uv-safe-bottom.vue_vue_type_style_index_0_scoped_71c4b1ce_lang.DIKD1uNm.js";import"./tabBar.vue_vue_type_style_index_0_scoped_8fa15eba_lang.CPwMltbA.js";import"./uni-icons.n_uTH-bD.js";import"./cook.Ddvzagky.js";const A=S({__name:"setting",setup(S){const A=a("关注Anon Tokyo喵，关注Anon Tokyo谢谢喵!!!!");e({npc:"npcData",npcRecommend:"npcData",location:"locationData",drink:"drinksData",cook:"cookData",matrial:"materialData",drinksTag:"drinkTagData",cookTag:"cookTagData"});const L=a(!1),M=e({username:"",loggedIn:!1}),q=()=>{const a=i("userInfo");a&&a.loggedIn?(L.value=!0,M.username=a.username,M.loggedIn=a.loggedIn):(L.value=!1,M.username="",M.loggedIn=!1)};o(L,(a=>{a&&q()}));const z=()=>{c({url:"/pages/login"})},F=()=>{v("userInfo"),L.value=!1,M.username="",M.loggedIn=!1,z()};x((()=>{q()}));const G=a(!1),N=a(""),R=a=>{N.value.show({...a,complete(){a.url&&c({url:a.url})}})},U=a(""),V=a(""),W=a(""),X=()=>{if(v("userInfo"),L.value=!1,M.username="",M.loggedIn=!1,"android"===Y.value)try{plus.runtime.restart()}catch(a){k({url:"npc"})}},Y=a("");s({success:a=>{Y.value=a.platform.toLowerCase(),console.log("getSystemInfo",a.platform.toLowerCase())},fail:a=>{console.log("getSystemInfo",a),R({type:"error",message:"getSystemInfo error!"+a,duration:2e3})}});return(a,e)=>{const o=D(t("uv-notice-bar"),b),s=D(t("uv-toast"),I),i=y,c=j,v=d,k=D(t("uv-loading-page"),C),x=D(t("uv-modal"),h);return p(),n(u,null,[l(v,{class:"setting"},{default:r((()=>[l(o,{text:A.value,color:"#830000"},null,8,["text"]),l(s,{ref_key:"toast",ref:N},null,512),L.value?(p(),g(v,{key:0,class:"user-status"},{default:r((()=>[l(i,{class:"username"},{default:r((()=>[_("当前用户: "+f(M.username),1)])),_:1}),l(c,{onClick:F,class:"switch-btn"},{default:r((()=>[_("切换账号")])),_:1})])),_:1})):(p(),g(c,{key:1,onClick:z,class:"login-btn"},{default:r((()=>[_("登录")])),_:1})),l(c,{onClick:e[0]||(e[0]=a=>X())},{default:r((()=>[_("重启应用")])),_:1}),l(c,{onClick:e[1]||(e[1]=a=>{"android"===Y.value&&plus.runtime.restart()})},{default:r((()=>[_("测试模式")])),_:1})])),_:1}),l(k,{loading:G.value,"loading-text":"读取中...","font-size":"20px","loading-mode":"semicircle",bgColor:"#8D6549"},null,8,["loading"]),l(x,{ref_key:"clearCacheModal",ref:U,content:"该操作会将所有数据重置!应用会自动重启!",showCancelButton:!0,onConfirm:e[2]||(e[2]=a=>(m(),B(),R({type:"success",message:"缓存重置成功!",duration:500}),void X()))},null,512),l(x,{ref_key:"confirmModal",ref:W,content:V.value},null,8,["content"]),l(w,{selected:4}),l(T)],64)}}},[["__scopeId","data-v-6d6f0b31"]]);export{A as default};
