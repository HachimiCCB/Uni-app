import{r as a,a as s,h as e,w as t,i as l,o,b as n,f as u,c as r,k as c,F as i,_ as p,q as _,af as m,D as d,S as f,N as v,C as h,t as g}from"./index-C_tPV8Gg.js";import{_ as j}from"./uni-icons.DEQM0KeZ.js";import{r as y}from"./uni-app.es.v3BVOZkq.js";import{_ as b}from"./uv-input.5TT0h7vA.js";import{_ as C}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./uv-icon.VZcHbu9W.js";import"./uv-icon.vue_vue_type_style_index_0_scoped_eab170a5_lang.DmvKmKEs.js";const k=C({__name:"ChatAssistant",setup(C){const k=a([{role:"assistant",content:"您好！我是东方夜雀食堂AI助手，如果您对游戏中的料理、人物、玩法感兴趣，请尽管问我~"}]),x=a(""),A=async()=>{if(!x.value.trim())return;k.value.push({role:"user",content:x.value});const a=x.value;x.value="";try{const s=await p.callFunction({name:"chat",data:{message:a}});k.value.push({role:"assistant",content:s.result})}catch(s){console.error("API调用失败:",s),k.value.push({role:"assistant",content:"抱歉，我暂时无法回答这个问题"})}},I=()=>{const a=_(),s=a[a.length-1].route;m({url:"/"+s})};return(a,p)=>{const _=d,m=y(s("uni-icons"),j),C=l,V=f,w=y(s("uv-input"),b),z=v;return o(),e(C,{class:"chat-container"},{default:t((()=>[n(C,{class:"chat-header"},{default:t((()=>[n(_,null,{default:t((()=>[u("夜雀AI助手")])),_:1}),n(m,{type:"close",size:"24",onClick:I})])),_:1}),n(V,{class:"chat-messages","scroll-y":"true"},{default:t((()=>[(o(!0),r(i,null,c(k.value,((a,s)=>(o(),e(C,{key:s,class:h(["message",a.role])},{default:t((()=>[u(g(a.content),1)])),_:2},1032,["class"])))),128))])),_:1}),n(C,{class:"chat-input"},{default:t((()=>[n(w,{modelValue:x.value,"onUpdate:modelValue":p[0]||(p[0]=a=>x.value=a),placeholder:"输入消息...",border:"none",bgColor:"#fbefcb"},null,8,["modelValue"]),n(z,{onClick:A},{default:t((()=>[u("发送")])),_:1})])),_:1})])),_:1})}}},[["__scopeId","data-v-003cf675"]]);export{k as default};
