"use strict";const e=require("../common/vendor.js");if(!Array){e.resolveComponent("uni-icons")()}Math;const t={__name:"commentCreate",setup(t){const o=e.ref(""),n=e.ref([]),a=e.nr.database(),l=()=>{e.index.chooseImage({count:3-n.value.length,sizeType:["compressed"],sourceType:["album","camera"],success:e=>{n.value=n.value.concat(e.tempFilePaths)}})},i=()=>{o.value.trim()?(e.index.showLoading({title:"提交中..."}),setTimeout((()=>{a.collection("comment").add({user_id:"client_test",content:o.value}),e.index.hideLoading(),e.index.showToast({title:"提交成功",icon:"success"}),o.value="",n.value=[]}),1500)):e.index.showToast({title:"请输入评论内容",icon:"none"})},s=()=>{if(0===n.value.length)return void e.index.showToast({title:"请先选择图片",icon:"none"});const t=n.value[0];e.nr.uploadFile({filePath:t,cloudPath:"test_"+Date.now()+".png"}).then((e=>{console.log(e)}))},c=()=>{o.value.trim()||n.value.length>0?e.index.showModal({title:"提示",content:"确定取消编辑吗？",success:e=>{e.confirm&&(o.value="",n.value=[])}}):e.index.navigateBack()};return(t,a)=>e.e({a:o.value,b:e.o((e=>o.value=e.detail.value)),c:e.f(n.value,((t,o,a)=>({a:t,b:"cfd980b4-0-"+a,c:e.o((t=>(t=>{e.index.showModal({title:"提示",content:"确定删除这张图片吗？",success:e=>{e.confirm&&n.value.splice(t,1)}})})(o)),o),d:o,e:e.o((t=>(t=>{e.index.previewImage({current:t,urls:n.value})})(o)),o)}))),d:e.p({type:"closeempty",size:"18",color:"#fff"}),e:n.value.length<3},n.value.length<3?{f:e.p({type:"plusempty",size:"40",color:"#8B5A2B"}),g:e.o(l)}:{},{h:e.o(i),i:!o.value.trim(),j:e.o(s),k:!o.value.trim(),l:e.o(c)})}};wx.createPage(t);
