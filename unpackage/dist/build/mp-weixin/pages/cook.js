"use strict";const e=require("../common/vendor.js");if(!Array){(e.resolveComponent("uv-scroll-list")+e.resolveComponent("uv-checkbox")+e.resolveComponent("uv-checkbox-group")+e.resolveComponent("uv-search")+e.resolveComponent("uv-drop-down-item")+e.resolveComponent("uv-drop-down-popup")+e.resolveComponent("uv-drop-down")+e.resolveComponent("uv-modal")+e.resolveComponent("GlobalChatButton"))()}Math||((()=>"../uni_modules/uv-scroll-list/components/uv-scroll-list/uv-scroll-list.js")+(()=>"../uni_modules/uv-checkbox/components/uv-checkbox/uv-checkbox.js")+(()=>"../uni_modules/uv-checkbox/components/uv-checkbox-group/uv-checkbox-group.js")+(()=>"../uni_modules/uv-search/components/uv-search/uv-search.js")+(()=>"../uni_modules/uv-drop-down/components/uv-drop-down-item/uv-drop-down-item.js")+(()=>"../uni_modules/uv-drop-down/components/uv-drop-down-popup/uv-drop-down-popup.js")+(()=>"../uni_modules/uv-drop-down/components/uv-drop-down/uv-drop-down.js")+l+(()=>"../uni_modules/uv-modal/components/uv-modal/uv-modal.js")+a+(()=>"../components/GlobalChatButton/GlobalChatButton.js"))();const a=()=>"../components/tab-bar/tabBar.js",l=()=>"../components/cookView.js",o={__name:"cook",setup(a){const l=e.ref("");e.nextTick$1((()=>{l.value=e.index.getSystemInfoSync().windowHeight})),e.onShow((()=>{}));const o=e.ref([]),u=e.ref([""]),t=e.ref(new Set),v=e.ref([{name:"煮锅",value:"cook1",disabled:!1},{name:"烤架",value:"cook2",disabled:!1},{name:"油锅",value:"cook3",disabled:!1},{name:"蒸锅",value:"cook4",disabled:!1},{name:"料理台",value:"cook5",disabled:!1}]),n=e=>{t.value.clear(),e.forEach((e=>{t.value.add(e)})),x()},r=e.ref({label:"默认排序",value:"normal"}),i=e.ref({label:"默认排序",value:"normal",activeIndex:0,color:"#dbaa9b",activeColor:"#d3aa76",child:[{label:"默认排序",value:"normal"},{label:"价格升序",value:"moneyUp"},{label:"价格降序",value:"moneyDown"}]}),c=e=>{r.value.label=e.label,r.value.value=e.value,x()},s=e.ref(e.index.getStorageSync("cookTagData")),d=e.ref(e.index.getStorageSync("cookTagData")),p=e.ref(e.index.getStorageSync("cookData")),m=e.ref(e.index.getStorageSync("materialData")),h=e.ref(new Set),f=e.ref(new Set);m.value.forEach((e=>{e.tag.split(",").forEach((e=>{e.trim()&&h.value.add(e.trim())}))}));const b=e.ref(""),k=e.ref(new Set),g=e.ref(new Set),w=e.ref(new Set),y=e.ref(""),x=e=>{b.value=p.value.filter((e=>{if(y.value&&!e.chinese.includes(y.value))return!1;let a=e.tag.split(","),l=e.material.split(","),o=[...k.value].concat();[...g.value].concat();let u=[...w.value].concat(),v=new Set;return!(a.length<k.value.size)&&(!(t.value.size>0&&!t.value.has(e.cooker))&&(a.forEach((e=>{o=o.filter((a=>a!==e.trim())),g.value.forEach((a=>{a===e.trim()&&v.add(a)}))})),l.forEach((e=>{u=u.filter((a=>a!==e.trim()))})),0===o.length&&0===v.size&&0===u.length))})),"moneyUp"===r.value.value?b.value=b.value.sort(((e,a)=>e.money-a.money)):"moneyDown"===r.value.value&&(b.value=b.value.sort(((e,a)=>-(e.money-a.money)))),(()=>{o.value.splice(0);let e=b.value.length<20?b.value.length:20;for(let a=0;a<e;a++)o.value.push(b.value[a]);setTimeout((()=>{o.value=b.value}),100)})()};x();const C=e.ref(!1),S=e.ref(""),_=e=>{S.value="",f.value.clear(),"like"===e?S.value={type:e,value:s.value}:"dislike"===e?S.value={type:e,value:d.value}:"material"===e&&(S.value={type:e,value:m.value}),C.value.open()},j=e=>{"like"===e?k.value.clear():"dislike"===e?g.value.clear():"material"===e&&w.value.clear(),x()},z=(e,a)=>{"like"===e?k.value.has(a)?k.value.delete(a):k.value.add(a):"dislike"===e?g.value.has(a)?g.value.delete(a):g.value.add(a):"material"===e&&(w.value.has(a)?w.value.delete(a):w.value.add(a)),x()};return(a,t)=>e.e({a:e.o((e=>_("like"))),b:e.f(k.value,((a,l,o)=>({a:e.t(a),b:a,c:e.o((e=>z("like",a)),a)}))),c:e.p({indicator:!1}),d:k.value.size>0},k.value.size>0?{e:e.o((e=>j("like")))}:{},{f:e.o((e=>_("dislike"))),g:e.f(g.value,((a,l,o)=>({a:e.t(a),b:a,c:e.o((e=>z("dislike",a)),a)}))),h:e.p({indicator:!1}),i:g.value.size>0},g.value.size>0?{j:e.o((e=>j("dislike")))}:{},{k:e.o((e=>_("material"))),l:e.f(w.value,((a,l,o)=>({a:e.t(a),b:a,c:e.o((e=>z("material",a)),a)}))),m:e.p({indicator:!1}),n:w.value.size>0},w.value.size>0?{o:e.o((e=>j("material")))}:{},{p:e.f(v.value,((a,l,o)=>({a:l,b:"7158deed-4-"+o+",7158deed-3",c:e.p({label:a.name,name:a.value})}))),q:e.o(n),r:e.o((e=>u.value=e)),s:e.p({placement:"row",labelColor:"#e6b4a6",labelSize:"16px",activeColor:"#8d6549",inactiveColor:"#fbefcb",modelValue:u.value}),t:e.o((e=>x())),v:e.o((e=>y.value=e)),w:e.p({placeholder:"请输入料理名称",bgColor:"#8D6549",borderColor:"#FBEFCB",searchIconColor:"#e0afa0",color:"#e0afa0",showAction:!1,height:"55rpx",modelValue:y.value}),x:e.p({name:"normal",type:"2",label:r.value.label,value:r.value.value}),y:e.o(c),z:e.p({sign:"cookSort",currentDropItem:i.value}),A:e.p({sign:"cookSort","text-color":"#dbaa9b","text-active-color":"#d3aa76",defaultValue:[0,"0","normal"]}),B:e.t("总数\n"+b.value.length),C:e.p({type:"cook",cookShow:o.value,cookFilter:k.value}),D:"like"===S.value.type},"like"===S.value.type?{E:e.f(S.value.value,((a,l,o)=>e.e({a:e.t(a),b:k.value.has(a)},(k.value.has(a),{}),{c:a,d:e.o((e=>z(S.value.type,a)),a)})))}:{},{F:"dislike"===S.value.type},"dislike"===S.value.type?{G:e.f(S.value.value,((a,l,o)=>e.e({a:e.t(a),b:g.value.has(a)},(g.value.has(a),{}),{c:a,d:e.o((e=>z(S.value.type,a)),a)})))}:{},{H:"material"===S.value.type},"material"===S.value.type?{I:e.f(h.value,((a,l,o)=>e.e({a:e.t(a),b:f.value.has(a)},(f.value.has(a),{}),{c:a,d:e.o((e=>{return l=a,f.value.has(l)?f.value.delete(l):f.value.add(l),void(S.value.value=m.value.filter((e=>{let a=e.tag.split(","),l=[...f.value].concat();return a.forEach((e=>{l=l.filter((a=>a!==e.trim()))})),0===l.length})));var l}),a)}))),J:e.f(S.value.value,((a,l,o)=>e.e({a:"/static/img/material/"+a.name+".png",b:e.t(a.chinese),c:e.t(a.money),d:e.t(a.level),e:!!a.tag},a.tag?{f:e.f(a.tag.split(","),((a,l,o)=>e.e({a:e.t(a.trim()),b:f.value.has(a.trim())},(f.value.has(a.trim()),{}),{c:a})))}:{},{g:w.value.has(a.chinese),h:a,i:e.o((e=>z(S.value.type,a.chinese)),a)})))}:{},{K:e.sr(C,"7158deed-10",{k:"tagModal"}),L:e.p({showConfirmButton:!1}),M:l.value-55+"px",N:e.p({selected:1})})}},u=e._export_sfc(o,[["__scopeId","data-v-7158deed"]]);wx.createPage(u);
