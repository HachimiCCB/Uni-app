"use strict";const e=require("../common/vendor.js");if(!Array){e.resolveComponent("uv-tabs")()}Math||((()=>"../uni_modules/uv-tabs/components/uv-tabs/uv-tabs.js")+a)();const a=()=>"../components/cookBar.js",t={__name:"npcItem",setup(a){const t=()=>{e.index.navigateBack()},l=e.ref("");e.nextTick$1((()=>{l.value=e.index.getSystemInfoSync().windowHeight,setTimeout((()=>{d(""),x("","")}),100)}));const n=e.ref([{name:"饮料"},{name:"烹饪"},{name:"推荐"},{name:"符卡"},{name:"羁绊"}]),u=e.ref(0),r=e=>{u.value=e.index},v=e.ref(e.index.getStorageSync("selectNpc")),o=e.ref(e.index.getStorageSync("drinksData")),c=e.ref([]),i=e.ref([]);o.value.forEach((e=>{i.value[e.chinese]=e}));const s=e.ref(new Set),d=e=>{e&&(s.value.has(e)?s.value.delete(e):s.value.add(e)),c.value=o.value.filter((e=>{let a=e.tag.split(","),t=[...s.value].concat();return!(a.length<s.value.size)&&(a.forEach((e=>{t=t.filter((a=>a!==e.trim()))})),0===t.length)}))},f=e.ref(e.index.getStorageSync("cookData")),m=e.ref([]),p=e.ref([]);f.value.forEach((e=>{p.value[e.chinese]=e}));const h=e.ref(new Set),g=e.ref(new Set);v.value.noTag.split(",").forEach((e=>{g.value.add(e.trim())}));const x=(e,a)=>{a&&("tag"===e?h.value.has(a)?h.value.delete(a):h.value.add(a):g.value.has(a)?g.value.delete(a):g.value.add(a)),m.value=f.value.filter((e=>{let a=e.tag.split(","),t=[...h.value].concat();[...g.value].concat();let l=new Set;return!(a.length<h.value.size)&&(a.forEach((e=>{t=t.filter((a=>a!==e.trim())),g.value.forEach((a=>{a===e.trim()&&l.add(a)}))})),0===t.length&&0===l.size)})),S()},b=e.ref([]),S=()=>{b.value.splice(0);let e=m.value.length<10?m.value.length:10;for(let a=0;a<e;a++)b.value.push(m.value[a]);setTimeout((()=>{b.value=m.value}),100)};return(a,o)=>({a:"/static/img/npc/"+v.value.name+".png",b:e.t(v.value.chinese),c:e.t(v.value.money),d:e.t(v.value.location),e:e.o(t),f:e.o(r),g:e.p({list:n.value,current:u.value,scrollable:!1}),h:e.f(v.value.drinks.split(","),((a,t,l)=>e.e({a:e.t(a.trim()),b:s.value.has(a.trim())},(s.value.has(a.trim()),{}),{c:a,d:e.o((e=>d(a.trim())),a)}))),i:e.f(c.value,((a,t,l)=>({a:"bbaafa8d-1-"+l,b:e.p({type:"drink",isRecommand:!1,cookItem:a,cookFilter:s.value}),c:a.name}))),j:l.value-280+"px",k:l.value-200+"px",l:u.value,m:e.o((e=>{u.value=e.detail.current})),n:l.value-200+"px",o:l.value-150+"px",p:l.value+"px"})}},l=e._export_sfc(t,[["__scopeId","data-v-bbaafa8d"]]);wx.createPage(l);
