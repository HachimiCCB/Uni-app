"use strict";const e=require("../common/vendor.js");if(!Array){(e.resolveComponent("uni-icons")+e.resolveComponent("uv-input"))()}Math||((()=>"../uni_modules/uni-icons/components/uni-icons/uni-icons.js")+(()=>"../uni_modules/uv-input/components/uv-input/uv-input.js"))();const n={__name:"ChatAssistant",setup(n){const t=e.ref([{role:"assistant",content:"您好！我是东方夜雀食堂AI助手，如果您对游戏中的料理、人物、玩法感兴趣，请尽管问我~"}]),o=e.ref(""),s=async()=>{if(!o.value.trim())return;t.value.push({role:"user",content:o.value});const n=o.value;o.value="";try{const o=await e.nr.callFunction({name:"chat",data:{message:n}});t.value.push({role:"assistant",content:o.result})}catch(s){console.error("API调用失败:",s),t.value.push({role:"assistant",content:"抱歉，我暂时无法回答这个问题"})}},u=()=>{const n=getCurrentPages(),t=n[n.length-1].route;e.index.redirectTo({url:"/"+t})};return(n,a)=>({a:e.o(u),b:e.p({type:"close",size:"24"}),c:e.f(t.value,((n,t,o)=>({a:e.t(n.content),b:t,c:e.n(n.role)}))),d:e.o((e=>o.value=e)),e:e.p({placeholder:"输入消息...",border:"none",bgColor:"#fbefcb",modelValue:o.value}),f:e.o(s)})}},t=e._export_sfc(n,[["__scopeId","data-v-265c41d0"]]);wx.createPage(t);
