import{r as t,a as e,h as a,w as s,i as o,o as l,b as n,f as c,t as u,j as i,c as m,k as r,F as _,m as d,D as f,N as p,E as g}from"./index-BBHsMkl9.js";import{_ as v}from"./uni-icons.CHT_tfDp.js";import{o as j,r as b}from"./uni-app.es.DcEqF3_b.js";import{_ as y}from"./uni-load-more.CM0Xr_nk.js";import{_ as h}from"./unicloud-db.jg8Ywu0D.js";import{t as x}from"./tabBar.DGPT5-Bv.js";import{_ as B}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./uv-icon.CNdQXE0P.js";import"./uv-icon.vue_vue_type_style_index_0_scoped_eab170a5_lang.DCSa3_gx.js";import"./uv-safe-bottom.DWiiGz3q.js";import"./uv-safe-bottom.vue_vue_type_style_index_0_scoped_71c4b1ce_lang.DIKD1uNm.js";import"./tabBar.vue_vue_type_style_index_0_scoped_8fa15eba_lang.CPwMltbA.js";const k=B({__name:"comments",setup(B){const k=t=>{const e=new Date(t);return`${e.getMonth()+1}月${e.getDate()}日 ${e.getHours()}:${e.getMinutes().toString().padStart(2,"0")}`},z=t({status:"loading"}),M=(t,e)=>{e&&(z.value.status="noMore")};return j((()=>{console.log("评论页面显示")})),(t,j)=>{const B=f,$=o,A=g,D=b(e("uni-icons"),v),w=b(e("uni-load-more"),y),C=b(e("unicloud-db"),h),F=p;return l(),a($,{class:"comment-container"},{default:s((()=>[n(C,{ref:"udb",options:z.value,collection:"comment",field:"_id, user_id, content, create_time",onLoad:M},{default:s((({data:t,loading:e,error:o,options:d})=>[n($,{class:"comment-header"},{default:s((()=>[n(B,{class:"comment-title"},{default:s((()=>[c("用户评论")])),_:1}),t&&t.length?(l(),a(B,{key:0,class:"comment-count"},{default:s((()=>[c("("+u(t.length)+"条)",1)])),_:2},1024)):i("",!0)])),_:2},1024),n($,{class:"comment-list"},{default:s((()=>[(l(!0),m(_,null,r(t,(t=>(l(),a($,{class:"comment-item",key:t._id},{default:s((()=>[n($,{class:"comment-avatar"},{default:s((()=>[n(A,{src:"./static/images/default-avatar.png",mode:"aspectFill"})])),_:1}),n($,{class:"comment-content"},{default:s((()=>[n($,{class:"comment-user"},{default:s((()=>[n(B,{class:"username"},{default:s((()=>[c(u(t.user_id||"匿名用户"),1)])),_:2},1024),n(B,{class:"time"},{default:s((()=>[c(u(k(t.create_time)),1)])),_:2},1024)])),_:2},1024),n($,{class:"comment-text"},{default:s((()=>[c(u(t.content),1)])),_:2},1024),n($,{class:"comment-actions"},{default:s((()=>[n($,{class:"action-item"},{default:s((()=>[n(D,{type:"hand-up",size:"16",color:"#8B5A2B"}),n(B,null,{default:s((()=>[c("12")])),_:1})])),_:1}),n($,{class:"action-item"},{default:s((()=>[n(D,{type:"chat",size:"16",color:"#8B5A2B"}),n(B,null,{default:s((()=>[c("回复")])),_:1})])),_:1})])),_:1})])),_:2},1024)])),_:2},1024)))),128))])),_:2},1024),e||"noMore"===d.status?(l(),a(w,{key:0,status:d.status,"icon-size":16,color:"#8B5A2B"},null,8,["status"])):i("",!0)])),_:1},8,["options"]),n($,{class:"comment-footer"},{default:s((()=>[n(F,{class:"submit-btn",onClick:j[0]||(j[0]=t=>{d({url:"/pages/articleCreate"})})},{default:s((()=>[n(D,{type:"compose",size:"20",color:"#fff"}),n(B,null,{default:s((()=>[c("发表评论")])),_:1})])),_:1})])),_:1}),n(x,{selected:3})])),_:1})}}},[["__scopeId","data-v-3504cc8a"]]);export{k as default};
