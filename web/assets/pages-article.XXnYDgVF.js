import{a8 as a,a9 as e,a as s,c as t,b as l,w as o,F as r,i,o as u,k as c,h as n,j as _,f as d,m,D as p,N as f,t as b,E as g}from"./index-BBHsMkl9.js";import{_ as v}from"./uni-load-more.CM0Xr_nk.js";import{o as j,b as y,r as h}from"./uni-app.es.DcEqF3_b.js";import{_ as D}from"./unicloud-db.jg8Ywu0D.js";import{_ as k}from"./uni-icons.CHT_tfDp.js";import{_ as x}from"./GlobalChatButton.DIx7y3cu.js";import{t as C}from"./tabBar.DGPT5-Bv.js";import{_ as B}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./uv-icon.CNdQXE0P.js";import"./uv-icon.vue_vue_type_style_index_0_scoped_eab170a5_lang.DCSa3_gx.js";import"./uv-safe-bottom.DWiiGz3q.js";import"./uv-safe-bottom.vue_vue_type_style_index_0_scoped_71c4b1ce_lang.DIKD1uNm.js";import"./tabBar.vue_vue_type_style_index_0_scoped_8fa15eba_lang.CPwMltbA.js";const T=B({__name:"article",setup(B){const T=a=>{const e=new Date(a);return`${e.getFullYear()}-${e.getMonth()+1}-${e.getDate()}`};return j((()=>{console.log("文章列表页面加载")})),y((()=>{console.log("触发下拉刷新");const s=a().refs.udb;let t=!1;const l=setTimeout((()=>{t||(console.warn("刷新超时，强制结束下拉动画"),e())}),1e3);s?s.loadData({clear:!0,success(){t=!0,clearTimeout(l),e()},fail(){t=!0,clearTimeout(l),e()}}):(t=!0,clearTimeout(l),e())})),(a,e)=>{const j=g,y=p,B=i,$=h(s("uni-load-more"),v),w=h(s("unicloud-db"),D),F=h(s("uni-icons"),k),I=f,G=h(s("GlobalChatButton"),x);return u(),t(r,null,[l(B,{class:"article-container"},{default:o((()=>[l(w,{ref:"udb",collection:"article",field:"title,author,summary,coverImage,publishDate,tags",orderby:"publishDate desc"},{default:o((({data:a,loading:e,error:s})=>[l(B,{class:"article-list"},{default:o((()=>[(u(!0),t(r,null,c(a,(a=>(u(),n(B,{class:"article-card",key:a._id,onClick:e=>{return s=a._id,void m({url:`/pages/articleDetail?id=${s}`});var s}},{default:o((()=>[l(j,{src:a.coverImage,class:"cover-image",mode:"aspectFill"},null,8,["src"]),l(B,{class:"article-tags"},{default:o((()=>[(u(!0),t(r,null,c(a.tags,(a=>(u(),n(y,{key:a,class:"tag"},{default:o((()=>[d(b(a),1)])),_:2},1024)))),128))])),_:2},1024),l(B,{class:"article-info"},{default:o((()=>[l(y,{class:"title"},{default:o((()=>[d(b(a.title),1)])),_:2},1024),l(y,{class:"summary"},{default:o((()=>[d(b(a.summary),1)])),_:2},1024),l(B,{class:"meta-line"},{default:o((()=>[l(y,{class:"author"},{default:o((()=>[d("作者："+b(a.author),1)])),_:2},1024),l(y,{class:"date"},{default:o((()=>[d(b(T(a.publishDate)),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:2},1024),e?(u(),n($,{key:0,status:"loading"})):_("",!0)])),_:1},512),l(B,{class:"comment-footer"},{default:o((()=>[l(I,{class:"submit-btn",onClick:e[0]||(e[0]=a=>{m({url:"/pages/articleCreate"})})},{default:o((()=>[l(F,{type:"compose",size:"20"}),l(y,null,{default:o((()=>[d("发表我的文章")])),_:1})])),_:1})])),_:1}),l(C,{selected:3})])),_:1}),l(G)],64)}}},[["__scopeId","data-v-2fe287a1"]]);export{T as default};
